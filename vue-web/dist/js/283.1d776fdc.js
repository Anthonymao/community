"use strict";(self["webpackChunkvue_web"]=self["webpackChunkvue_web"]||[]).push([[283],{283:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(3396);const r={style:{margin:"60px auto 0"}},n=(0,s._)("h5",{style:{"text-align":"center",margin:"30px"}},"获取匿名投票活动结果",-1),i=(0,s.Uk)("下一步"),o=(0,s._)("div",{class:"step-form-style-desc"},[(0,s._)("h3",null,"说明"),(0,s._)("h4",null,"加入匿名灵活投票或匿名权重投票注意事项：请根据投票项目唯一ID标识输入加入对应投票项目。"),(0,s._)("p")],-1);function l(e,t,a,l,u,d){const m=(0,s.up)("a-input"),p=(0,s.up)("a-form-item"),c=(0,s.up)("a-button"),h=(0,s.up)("a-form"),f=(0,s.up)("a-divider"),g=(0,s.up)("a-card");return(0,s.wg)(),(0,s.j4)(g,{bordered:!1},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s.Wm)(h,{model:e.formState,name:"custom-validation",rules:e.rules,labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:12}},autocomplete:"off",onFinish:e.onFinish,onFinishFailed:e.onFinishFailed},{default:(0,s.w5)((()=>[n,(0,s.Wm)(p,{"has-feedback":"",label:"投票ID",name:"ID"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{size:"large",value:e.formState.ID,"onUpdate:value":t[0]||(t[0]=t=>e.formState.ID=t),placeholder:"输入投票项目ID",type:"text",autocomplete:"off"},null,8,["value"])])),_:1}),(0,s.Wm)(p,{wrapperCol:{span:24},style:{"text-align":"center"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{type:"primary","html-type":"submit",onClick:e.nextStep,loading:""!==e.formState.click},{default:(0,s.w5)((()=>[i])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules","onFinish","onFinishFailed"]),(0,s.Wm)(f),o])])),_:1})}a(333);var u=a(252),d=a(4870),m=(0,s.aZ)({setup(){const e=(0,d.qj)({ID:"",click:""});let t=async(e,t)=>""===t?Promise.reject("请输入正确格式"):t.length!=t.split(" ").join("").length?Promise.reject("输入包含空格"):Promise.resolve();const a={ID:[{required:!0,validator:t,trigger:"change"}]};return{formState:e,validateID:t,rules:a}},methods:{nextStep(){this.formState.click="click",""!==this.formState.ID&&this.formState.ID.length==this.formState.ID.split(" ").join("").length&&(console.log(this.formState.ID),this.send())},send(){this.$http.post("http://192.168.5.42:8888/voter/if_add_share",{name:sessionStorage.getItem("user"),password:sessionStorage.getItem("pass"),ID:this.formState.ID,uid:sessionStorage.getItem("uid")}).then((e=>{this.formState.click="",console.log(e),"error1"==e.data.result&&(u.ZP.destroy(),u.ZP.warning("请检查登录")),"error2"==e.data.result&&(u.ZP.destroy(),u.ZP.warning("没有找到对应投票项目")),"we"==e.data.type?("wait"==e.data.result&&(u.ZP.destroy(),u.ZP.warning("请等待全部参与者上传秘密份额")),"doshare"==e.data.result&&this.$router.push({name:"resultwe",params:{info:JSON.stringify(e.data)}}),"success"==e.data.result&&this.$router.push({name:"weresult",params:{info:JSON.stringify(e.data)}})):("wait"==e.data.result&&(u.ZP.destroy(),u.ZP.warning("请等待参与者上传秘密份额达到门限数量")),"doshare"==e.data.result&&this.$router.push({name:"resultavec",params:{info:JSON.stringify(e.data)}}),"success"==e.data.result&&this.$router.push({name:"avecresult",params:{info:JSON.stringify(e.data)}}))}))}}}),p=a(89);const c=(0,p.Z)(m,[["render",l]]);var h=c}}]);
//# sourceMappingURL=283.1d776fdc.js.map