"use strict";(self["webpackChunkvue_web"]=self["webpackChunkvue_web"]||[]).push([[608],{9608:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var r=a(3396);const s={style:{margin:"60px auto 0"}},n=(0,r._)("h5",{style:{"text-align":"center",margin:"30px"}},"开始匿名投票活动",-1),o=(0,r.Uk)("下一步 "),i=(0,r._)("div",{class:"step-form-style-desc"},[(0,r._)("h3",null,"说明"),(0,r._)("h4",null,"加入匿名灵活投票或匿名权重投票注意事项：请根据投票项目唯一ID标识输入加入对应投票项目。"),(0,r._)("p")],-1);function l(t,e,a,l,u,d){const m=(0,r.up)("a-input"),p=(0,r.up)("a-form-item"),c=(0,r.up)("a-button"),h=(0,r.up)("a-form"),g=(0,r.up)("a-divider"),f=(0,r.up)("a-card");return(0,r.wg)(),(0,r.j4)(f,{bordered:!1},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r.Wm)(h,{model:t.formState,name:"custom-validation",rules:t.rules,labelCol:{lg:{span:7},sm:{span:7}},wrapperCol:{lg:{span:10},sm:{span:12}},autocomplete:"off",onFinish:t.onFinish,onFinishFailed:t.onFinishFailed},{default:(0,r.w5)((()=>[n,(0,r.Wm)(p,{"has-feedback":"",label:"投票ID",name:"ID"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{size:"large",value:t.formState.ID,"onUpdate:value":e[0]||(e[0]=e=>t.formState.ID=e),placeholder:"输入投票项目ID",type:"text",autocomplete:"off"},null,8,["value"])])),_:1}),(0,r.Wm)(p,{wrapperCol:{span:24},style:{"text-align":"center"}},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"primary","html-type":"submit",onClick:t.nextStep,loading:""!==t.formState.click},{default:(0,r.w5)((()=>[o])),_:1},8,["onClick","loading"])])),_:1})])),_:1},8,["model","rules","onFinish","onFinishFailed"]),(0,r.Wm)(g),i])])),_:1})}a(333);var u=a(252),d=a(4870),m=(0,r.aZ)({setup(){const t=(0,d.qj)({ID:"",click:""});let e=async(t,e)=>""===e?Promise.reject("请输入正确格式"):e.length!=e.split(" ").join("").length?Promise.reject("输入包含空格"):Promise.resolve();const a={ID:[{required:!0,validator:e,trigger:"change"}]};return{formState:t,validateID:e,rules:a}},methods:{nextStep(){this.formState.click="click",""!==this.formState.ID&&this.formState.ID.length==this.formState.ID.split(" ").join("").length&&(console.log(this.formState.ID),this.send())},send(){this.$http.post("http://192.168.5.42:8888/voter/start_vote",{name:sessionStorage.getItem("user"),password:sessionStorage.getItem("pass"),ID:this.formState.ID,uid:sessionStorage.getItem("uid")}).then((t=>{this.formState.click="",console.log(t),"error1"==t.data.result&&(u.ZP.destroy(),u.ZP.warning("请检查登录")),"error2"==t.data.result&&(u.ZP.destroy(),u.ZP.warning("没有找到对应投票项目")),"error3"==t.data.result&&(u.ZP.destroy(),u.ZP.warning("没有该投票活动的投票权限！")),"hasvote"==t.data.result&&(u.ZP.destroy(),u.ZP.warning("您已经投票，请点击获取投票结果！")),"add"==t.data.result&&(this.$router.push("/addvoting"),u.ZP.destroy(),u.ZP.warning("请先加入投票！")),"wait"==t.data.result&&(u.ZP.destroy(),u.ZP.warning("请等待系统建立公钥")),"success"==t.data.result&&("we"==t.data.type?this.$router.push({name:"votingwe",params:{info:JSON.stringify(t.data)}}):this.$router.push({name:"votingavec",params:{info:JSON.stringify(t.data)}}))}))}}}),p=a(89);const c=(0,p.Z)(m,[["render",l]]);var h=c}}]);
//# sourceMappingURL=608.5fb892e6.js.map