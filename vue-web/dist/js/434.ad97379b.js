(self["webpackChunkvue_web"]=self["webpackChunkvue_web"]||[]).push([[434],{7702:function(e,t,r){r(2801),r(8675),r(3462),r(7380),r(1118),r(1703),function(t,r){e.exports=r()}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof r.g&&r.g,(function(){"use strict";var e="3.7.2",t=e,r="function"===typeof atob,n="function"===typeof btoa,o="function"===typeof Buffer,a="function"===typeof TextDecoder?new TextDecoder:void 0,s="function"===typeof TextEncoder?new TextEncoder:void 0,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=Array.prototype.slice.call(u),c=function(e){var t={};return e.forEach((function(e,r){return t[e]=r})),t}(i),f=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),d="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e,t){return void 0===t&&(t=function(e){return e}),new Uint8Array(Array.prototype.slice.call(e,0).map(t))},m=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},p=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},h=function(e){for(var t,r,n,o,a="",s=e.length%3,u=0;u<e.length;){if((r=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255||(o=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,a+=i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}return s?a.slice(0,s-3)+"===".substring(s):a},g=n?function(e){return btoa(e)}:o?function(e){return Buffer.from(e,"binary").toString("base64")}:h,y=o?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=4096,r=[],n=0,o=e.length;n<o;n+=t)r.push(l.apply(null,e.subarray(n,n+t)));return g(r.join(""))},b=function(e,t){return void 0===t&&(t=!1),t?m(y(e)):y(e)},w=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},S=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,v=function(e){return e.replace(S,w)},A=o?function(e){return Buffer.from(e,"utf8").toString("base64")}:s?function(e){return y(s.encode(e))}:function(e){return g(v(e))},x=function(e,t){return void 0===t&&(t=!1),t?m(A(e)):A(e)},C=function(e){return x(e,!0)},B=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,_=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return l(55296+(r>>>10))+l(56320+(1023&r));case 3:return l((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return l((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},U=function(e){return e.replace(B,_)},k=function(e){if(e=e.replace(/\s+/g,""),!f.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,o="",a=0;a<e.length;)t=c[e.charAt(a++)]<<18|c[e.charAt(a++)]<<12|(r=c[e.charAt(a++)])<<6|(n=c[e.charAt(a++)]),o+=64===r?l(t>>16&255):64===n?l(t>>16&255,t>>8&255):l(t>>16&255,t>>8&255,255&t);return o},P=r?function(e){return atob(p(e))}:o?function(e){return Buffer.from(e,"base64").toString("binary")}:k,F=o?function(e){return d(Buffer.from(e,"base64"))}:function(e){return d(P(e),(function(e){return e.charCodeAt(0)}))},Z=function(e){return F(W(e))},I=o?function(e){return Buffer.from(e,"base64").toString("utf8")}:a?function(e){return a.decode(F(e))}:function(e){return U(P(e))},W=function(e){return p(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},j=function(e){return I(W(e))},E=function(e){if("string"!==typeof e)return!1;var t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},D=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},z=function(){var e=function(e,t){return Object.defineProperty(String.prototype,e,D(t))};e("fromBase64",(function(){return j(this)})),e("toBase64",(function(e){return x(this,e)})),e("toBase64URI",(function(){return x(this,!0)})),e("toBase64URL",(function(){return x(this,!0)})),e("toUint8Array",(function(){return Z(this)}))},R=function(){var e=function(e,t){return Object.defineProperty(Uint8Array.prototype,e,D(t))};e("toBase64",(function(e){return b(this,e)})),e("toBase64URI",(function(){return b(this,!0)})),e("toBase64URL",(function(){return b(this,!0)}))},T=function(){z(),R()},O={version:e,VERSION:t,atob:P,atobPolyfill:k,btoa:g,btoaPolyfill:h,fromBase64:j,toBase64:x,encode:x,encodeURI:C,encodeURL:C,utob:v,btou:U,decode:j,isValid:E,fromUint8Array:b,toUint8Array:Z,extendString:z,extendUint8Array:R,extendBuiltins:T,Base64:{}};return Object.keys(O).forEach((function(e){return O.Base64[e]=O[e]})),O}))},6434:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(3396);const o=e=>((0,n.dD)("data-v-64e137e7"),e=e(),(0,n.Cn)(),e),a=o((()=>(0,n._)("div",{class:"sign-up-header",style:{"background-color":"#3EA1EC"}},[(0,n._)("div",{class:"content"},[(0,n._)("h2",{class:"mb-5",style:{"font-size":"42px"}},"区块链投票"),(0,n._)("p",{class:"text-lg"},"基于区块链的在线安全电子投票系统.")])],-1))),s=o((()=>(0,n._)("h5",{class:"font-semibold text-center"},"账户登录",-1))),u=(0,n.Uk)("记住密码"),i=(0,n.Uk)("注册账户"),c=(0,n.Uk)("登录");function f(e,t,r,o,f,l){const d=(0,n.up)("user-outlined"),m=(0,n.up)("info-circle-outlined"),p=(0,n.up)("a-tooltip"),h=(0,n.up)("a-input"),g=(0,n.up)("a-form-item"),y=(0,n.up)("a-input-password"),b=(0,n.up)("a-checkbox"),w=(0,n.up)("router-link"),S=(0,n.up)("a-button"),v=(0,n.up)("a-form"),A=(0,n.up)("a-card");return(0,n.wg)(),(0,n.iD)("div",null,[a,(0,n.Wm)(A,{bordered:!1,class:"card-signup header-solid h-full",bodyStyle:{paddingTop:0}},{title:(0,n.w5)((()=>[s])),default:(0,n.w5)((()=>[(0,n.Wm)(v,{id:"components-form-demo-normal-login",rules:e.rules,model:e.formState,name:"basic",class:"login-form",autocomplete:"off"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{"has-feedback":"",name:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{type:"text",placeholder:"账户",value:e.formState.username,"onUpdate:value":t[0]||(t[0]=t=>e.formState.username=t),autocomplete:"off"},{prefix:(0,n.w5)((()=>[(0,n.Wm)(d,{style:{color:"rgba(0, 0, 0, 0.45)"},type:"user"})])),suffix:(0,n.w5)((()=>[(0,n.Wm)(p,{title:"这是必要信息"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{style:{color:"rgba(0, 0, 0, 0.45)"}})])),_:1})])),_:1},8,["value"])])),_:1}),(0,n.Wm)(g,{"has-feedback":"",name:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{type:"text",placeholder:"密码",value:e.formState.password,"onUpdate:value":t[1]||(t[1]=t=>e.formState.password=t),autocomplete:"off"},null,8,["value"])])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(b,{style:{color:"rgba(0, 0, 0, 0.45)"},checked:e.formState.remember,"onUpdate:checked":t[2]||(t[2]=t=>e.formState.remember=t)},{default:(0,n.w5)((()=>[u])),_:1},8,["checked"]),(0,n.Wm)(w,{class:"register",to:"/register",style:{float:"right"}},{default:(0,n.w5)((()=>[i])),_:1})])),_:1}),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[(0,n.Wm)(S,{style:{width:"100%","font-size":"15px"},type:"primary","html-type":"submit",onClick:e.login},{default:(0,n.w5)((()=>[c])),_:1},8,["onClick"])])),_:1})])),_:1},8,["rules","model"])])),_:1})])}var l=r(252),d=r(9702),m=r.n(d),p=r(4870),h=(0,n.aZ)({setup(){const e=(0,p.qj)({username:"",password:"",remember:!1});let t=async(e,t)=>""===t?Promise.reject("请输入正确格式账户名"):t.length!=t.split(" ").join("").length?Promise.reject("输入包含空格"):Promise.resolve(),r=async(e,t)=>""===t?Promise.reject("请输入初始密码"):t.length!=t.split(" ").join("").length?Promise.reject("输入包含空格"):Promise.resolve();const n={password:[{required:!0,validator:r,trigger:"change"}],username:[{validator:t,trigger:"change"}]},o=e=>{console.log("Success:",e)},a=e=>{console.log("Failed:",e)};return{rules:n,formState:e,onFinish:o,onFinishFailed:a}},mounted(){let e=r(7702).Base64,t=localStorage.getItem("user");t&&(this.formState.username=localStorage.getItem("user"),this.formState.password=e.decode(localStorage.getItem("password")),this.formState.remember=!0)},created(){console.log(this.$route.params)},methods:{login(){if(""===this.formState.username||""==this.formState.password||this.formState.username.length!==this.formState.username.split(" ").join("").length||this.formState.password.length!==this.formState.password.split(" ").join("").length)l.ZP.destroy(),l.ZP.error("登录错误，请检查输入格式",3);else{var e=m()(this.formState.password);this.$http.post("http://192.168.5.42:8888/login",{name:this.formState.username,password:e}).then((t=>{if("success"===t.data.result){if(sessionStorage.setItem("user",this.formState.username),sessionStorage.setItem("pass",e),sessionStorage.setItem("token",t.data.token),sessionStorage.setItem("uid",t.data.uid),this.formState.remember){let e=r(7702).Base64,t=e.encode(this.formState.password);localStorage.setItem("user",this.formState.username),localStorage.setItem("password",t)}else localStorage.removeItem("user"),localStorage.removeItem("password");l.ZP.destroy(),l.ZP.success("登录成功",3),this.$router.push("/overview")}"none"===t.data.result&&(l.ZP.destroy(),l.ZP.warning("用户名不存在，请注册",3)),"fail"===t.data.result&&(l.ZP.destroy(),l.ZP.error("登录失败，密码错误",3)),"error"===t.data.result&&(l.ZP.destroy(),l.ZP.warning("登录出错",3))})).catch((function(e){console.log(e)}))}}}}),g=r(89);const y=(0,g.Z)(h,[["render",f],["__scopeId","data-v-64e137e7"]]);var b=y}}]);
//# sourceMappingURL=434.ad97379b.js.map