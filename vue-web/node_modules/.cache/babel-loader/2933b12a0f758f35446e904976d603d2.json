{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport Layout from \"@/layout/HomeNav.vue\";\nimport HomeLayout from \"@/layout/HomeLayout\";\nimport UserLayout from \"@/layout/UserLayout\";\nimport { message } from \"ant-design-vue\";\nconst routes = [{\n  path: '/',\n  component: HomeLayout,\n  redirect: '/home',\n  children: [{\n    path: '/home',\n    component: () => import('@/views/home/HomePage.vue'),\n    name: 'home',\n    meta: {\n      title: '主页'\n    }\n  }, {\n    path: '/introAvec',\n    component: () => import('@/views/home/IntroAvec.vue'),\n    name: 'introAvec',\n    meta: {\n      title: '介绍'\n    }\n  }, {\n    path: '/introWe',\n    component: () => import('@/views/home/IntroWe.vue'),\n    name: 'introWe',\n    meta: {\n      title: '介绍'\n    }\n  }, {\n    path: '/support',\n    component: () => import('@/views/home/supportPage.vue'),\n    name: 'support',\n    meta: {\n      title: '技术支持'\n    }\n  }, {\n    path: '/about',\n    component: () => import('@/views/home/AboutPage.vue'),\n    name: 'about',\n    meta: {\n      title: '操作指南'\n    }\n  }, {\n    path: '/contact',\n    component: () => import('@/views/home/ContactPage.vue'),\n    name: 'contact',\n    meta: {\n      title: '操作指南'\n    }\n  }]\n}, {\n  path: '/login',\n  component: UserLayout,\n  children: [{\n    path: '/login',\n    component: () => import('@/views/user/LoginUser.vue'),\n    name: 'login',\n    meta: {\n      title: '登录'\n    }\n  }, {\n    path: '/register',\n    component: () => import('@/views/user/RegisterUser.vue'),\n    name: 'register',\n    meta: {\n      title: '登录'\n    }\n  }]\n}, {\n  path: '/init-voting',\n  component: Layout,\n  children: [{\n    path: '/avec',\n    component: () => import('@/views/InitVote/avec/initAvec/AVEC.vue'),\n    name: 'avec',\n    meta: {\n      title: '匿名灵活投票',\n      requiredLogin: true\n    }\n  }, // {\n  //     path: '/freshavec',\n  //     component:()=>import ('@/views/InitVote/avec/ReAVEC.vue'),\n  //     name: 'freshavec',\n  //     meta: {\n  //         title: '更新投票'\n  //     }\n  // },\n  {\n    path: '/we',\n    component: () => import('@/views/InitVote/we/initWe/WE.vue'),\n    name: 'we',\n    meta: {\n      title: '匿名权重投票',\n      requiredLogin: true\n    }\n  } // {\n  //     path: '/freshwe',\n  //     component:()=>import ('@/views/InitVote/we/ReWE.vue'),\n  //     name: 'freshwe',\n  //     meta: {\n  //         title: '更新投票'\n  //     }\n  // },\n  ]\n}, {\n  path: '/voting',\n  component: Layout,\n  children: [{\n    path: '/voting',\n    component: () => import('@/views/voting/AddVoting.vue'),\n    name: 'voting',\n    meta: {\n      title: '加入投票',\n      requiredLogin: true\n    }\n  }]\n}, {\n  path: '/overview',\n  component: Layout,\n  children: [{\n    path: '/overview',\n    component: () => import('@/views/overview/OverView.vue'),\n    name: 'overview',\n    meta: {\n      title: '概览',\n      requiredLogin: true\n    }\n  }]\n}, {\n  path: '/info',\n  component: Layout,\n  children: [{\n    path: '/result',\n    component: () => import('@/views/info/GetResult.vue'),\n    name: 'result',\n    meta: {\n      title: '投票结果',\n      requiredLogin: true\n    }\n  }, {\n    path: '/voting-info',\n    component: () => import('@/views/info/GetInfo.vue'),\n    name: 'voting-info',\n    meta: {\n      title: '投票详情',\n      requiredLogin: true\n    }\n  }]\n}, {\n  path: '/404',\n  name: 'NotFoundPage',\n  component: () => import('@/views/PageNot.vue')\n}, {\n  // will match everything\n  path: '/:catchAll(.*)',\n  redirect: '/404'\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const requiredLogin = to.meta.requiredLogin; // console.log(requiredLogin)\n\n  let token = sessionStorage.getItem(\"token\");\n\n  if (requiredLogin) {\n    if (token) {\n      next();\n    } else {\n      message.warning(\"请完成登录！\");\n      next('/login');\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Layout","HomeLayout","UserLayout","message","routes","path","component","redirect","children","name","meta","title","requiredLogin","router","history","beforeEach","to","from","next","token","sessionStorage","getItem","warning"],"sources":["/home/ubuntu/voting/vue-web/src/router/index.js"],"sourcesContent":["import { createRouter,createWebHistory} from \"vue-router\";\r\nimport Layout from \"@/layout/HomeNav.vue\";\r\nimport HomeLayout from \"@/layout/HomeLayout\";\r\nimport UserLayout from \"@/layout/UserLayout\";\r\nimport { message } from \"ant-design-vue\";\r\n\r\nconst routes = [\r\n    {\r\n        path:'/',\r\n        component : HomeLayout,\r\n        redirect:'/home',\r\n        children:[\r\n            {\r\n            path:'/home',\r\n            component:() => import('@/views/home/HomePage.vue'),\r\n            name:'home',\r\n            meta:{\r\n                title:'主页'\r\n            }\r\n        },\r\n            {\r\n                path:'/introAvec',\r\n                component:() => import('@/views/home/IntroAvec.vue'),\r\n                name:'introAvec',\r\n                meta:{\r\n                    title:'介绍'\r\n                }\r\n            },\r\n\r\n            {\r\n                path:'/introWe',\r\n                component:() => import('@/views/home/IntroWe.vue'),\r\n                name:'introWe',\r\n                meta:{\r\n                    title:'介绍'\r\n                }\r\n            },\r\n            {\r\n                path:'/support',\r\n                component:() => import('@/views/home/supportPage.vue'),\r\n                name:'support',\r\n                meta:{\r\n                    title:'技术支持'\r\n                }\r\n            },\r\n            {\r\n                path:'/about',\r\n                component:() => import('@/views/home/AboutPage.vue'),\r\n                name:'about',\r\n                meta:{\r\n                    title:'操作指南'\r\n                }\r\n            },\r\n            {\r\n                path:'/contact',\r\n                component:() => import('@/views/home/ContactPage.vue'),\r\n                name:'contact',\r\n                meta:{\r\n                    title:'操作指南'\r\n                }\r\n            }\r\n        ]\r\n    },\r\n\r\n    {\r\n        path:'/login',\r\n        component : UserLayout,\r\n        children:[ {\r\n            path:'/login',\r\n            component:() => import('@/views/user/LoginUser.vue'),\r\n            name:'login',\r\n            meta:{\r\n                title:'登录',\r\n            }   \r\n        },\r\n        {\r\n            path:'/register',\r\n            component:() => import('@/views/user/RegisterUser.vue'),\r\n            name:'register',\r\n            meta:{\r\n                title:'登录'\r\n            }\r\n        },\r\n        ]\r\n    },\r\n\r\n   \r\n\r\n    \r\n\r\n    {\r\n        path: '/init-voting',\r\n        component: Layout,\r\n        children: [\r\n            {\r\n                path: '/avec',\r\n                component:()=>import ('@/views/InitVote/avec/initAvec/AVEC.vue'),\r\n                name: 'avec',\r\n                meta: {\r\n                    title: '匿名灵活投票',\r\n                    requiredLogin: true\r\n                }\r\n            },\r\n            // {\r\n            //     path: '/freshavec',\r\n            //     component:()=>import ('@/views/InitVote/avec/ReAVEC.vue'),\r\n            //     name: 'freshavec',\r\n            //     meta: {\r\n            //         title: '更新投票'\r\n            //     }\r\n            // },\r\n            {\r\n                path: '/we',\r\n                component:()=>import ('@/views/InitVote/we/initWe/WE.vue'),\r\n                name: 'we',\r\n                meta: {\r\n                    title: '匿名权重投票',\r\n                    requiredLogin: true\r\n                }\r\n            },\r\n            // {\r\n            //     path: '/freshwe',\r\n            //     component:()=>import ('@/views/InitVote/we/ReWE.vue'),\r\n            //     name: 'freshwe',\r\n            //     meta: {\r\n            //         title: '更新投票'\r\n            //     }\r\n            // },\r\n        ]\r\n\r\n    },\r\n\r\n    {\r\n        path:'/voting',\r\n        component : Layout,\r\n        children:[{\r\n            path:'/voting',\r\n            component:() => import('@/views/voting/AddVoting.vue'),\r\n            name:'voting',\r\n            meta:{\r\n                title:'加入投票',\r\n                requiredLogin: true\r\n            }\r\n        }\r\n        ]\r\n    },\r\n    {\r\n        path:'/overview',\r\n        component : Layout,\r\n        children:[{\r\n            path:'/overview',\r\n            component:() => import('@/views/overview/OverView.vue'),\r\n            name:'overview',\r\n            meta:{\r\n                title:'概览',\r\n                requiredLogin: true\r\n            }\r\n        }\r\n        ]\r\n    },\r\n    {\r\n        path:'/info',\r\n        component : Layout,\r\n        children:[\r\n            {\r\n            path:'/result',\r\n            component:() => import('@/views/info/GetResult.vue'),\r\n            name:'result',\r\n            meta:{\r\n                title:'投票结果',\r\n                requiredLogin: true\r\n            }\r\n        },\r\n            {\r\n                path:'/voting-info',\r\n                component:() => import('@/views/info/GetInfo.vue'),\r\n                name:'voting-info',\r\n                meta:{\r\n                    title:'投票详情',\r\n                    requiredLogin: true\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        path:'/404',\r\n        name:'NotFoundPage',\r\n\t\tcomponent: () => import('@/views/PageNot.vue'),\r\n    },\r\n    {\r\n\t\t// will match everything\r\n\t\tpath: '/:catchAll(.*)',\r\n        redirect: '/404',\r\n\t},\r\n\r\n]\r\n\r\n\r\nconst router = createRouter(\r\n    {\r\n        history:createWebHistory(),\r\n        routes\r\n    }\r\n)\r\n\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    const requiredLogin = to.meta.requiredLogin\r\n    // console.log(requiredLogin)\r\n    let token = sessionStorage.getItem(\"token\");\r\n    \r\n    if(requiredLogin){\r\n        if(token){\r\n            next();\r\n        }\r\n        else{\r\n            message.warning(\"请完成登录！\")\r\n            next('/login')\r\n        }\r\n    }\r\n    else{\r\n        next()\r\n    }\r\n  });\r\n export default router"],"mappings":"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"},"metadata":{},"sourceType":"module"}