{"ast":null,"code":"import { defineComponent, reactive, ref, toRaw } from 'vue';\nexport default defineComponent({\n  setup() {\n    const formRef = ref();\n    const formState = reactive({\n      title: '',\n      param: '',\n      choice: '',\n      date1: undefined,\n      resource: '',\n      desc: '',\n      voter: ''\n    });\n    const rules = {\n      title: [{\n        required: true,\n        message: '请输入投票标题',\n        trigger: 'change'\n      }],\n      voter: [{\n        required: true,\n        message: '请输入投票标题',\n        trigger: 'change'\n      }],\n      choice: [{\n        required: true,\n        message: '请输入投票选项',\n        trigger: 'change'\n      }],\n      param: [{\n        required: true,\n        message: '请输入加密参数',\n        trigger: 'change'\n      }],\n      date1: [{\n        required: true,\n        message: '请选择投票日期'\n      }],\n      resource: [{\n        required: true,\n        message: '请选择选项形式',\n        trigger: 'change'\n      }],\n      desc: [{\n        required: true,\n        message: '请输入投票备注',\n        trigger: 'change'\n      }]\n    };\n    const dynamicValidateForm = reactive({\n      domains: []\n    });\n\n    const removeDomain = item => {\n      let index = dynamicValidateForm.domains.indexOf(item);\n\n      if (index !== -1) {\n        dynamicValidateForm.domains.splice(index, 1);\n      }\n    };\n\n    const addDomain = () => {\n      dynamicValidateForm.domains.push({\n        value: '',\n        key: Date.now()\n      });\n    };\n\n    const onSubmit = () => {\n      formRef.value.validate().then(() => {\n        console.log('values', formState, toRaw(formState));\n      }).catch(error => {\n        console.log('error', error);\n      });\n    };\n\n    const resetForm = () => {\n      formRef.value.resetFields();\n    };\n\n    return {\n      formRef,\n      // labelCol: {\n      //   span: 4,\n      // },\n      // wrapperCol: {\n      //   span:15,\n      // },\n      // other: '',\n      formState,\n      rules,\n      onSubmit,\n      resetForm,\n      addDomain,\n      removeDomain,\n      dynamicValidateForm\n    };\n  }\n\n});","map":{"version":3,"mappings":"AA0FA,SAASA,eAAT,EAA0BC,QAA1B,EAAoCC,GAApC,EAAyCC,KAAzC,QAAsD,KAAtD;AACA,eAAeH,eAAe,CAAC;EAC7BI,KAAK,GAAG;IACN,MAAMC,OAAM,GAAIH,GAAG,EAAnB;IACA,MAAMI,SAAQ,GAAIL,QAAQ,CAAC;MACzBM,KAAK,EAAE,EADkB;MAEzBC,KAAK,EAAE,EAFkB;MAGzBC,MAAM,EAAE,EAHiB;MAIzBC,KAAK,EAAEC,SAJkB;MAKzBC,QAAQ,EAAE,EALe;MAMzBC,IAAI,EAAE,EANmB;MAOzBC,KAAK,EAAE;IAPkB,CAAD,CAA1B;IASA,MAAMC,KAAI,GAAI;MACZR,KAAK,EAAE,CACL;QACES,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE,SAFX;QAGEC,OAAO,EAAE;MAHX,CADK,CADK;MAQZJ,KAAK,EAAE,CACL;QACEE,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE,SAFX;QAGEC,OAAO,EAAE;MAHX,CADK,CARK;MAeZT,MAAM,EAAE,CACN;QACEO,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE,SAFX;QAGEC,OAAO,EAAE;MAHX,CADM,CAfI;MAsBZV,KAAK,EAAE,CACL;QACEQ,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE,SAFX;QAGEC,OAAO,EAAE;MAHX,CADK,CAtBK;MA6BZR,KAAK,EAAE,CACL;QACEM,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE;MAFX,CADK,CA7BK;MAmCZL,QAAQ,EAAE,CACR;QACEI,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE,SAFX;QAGEC,OAAO,EAAE;MAHX,CADQ,CAnCE;MA0CZL,IAAI,EAAE,CACJ;QACEG,QAAQ,EAAE,IADZ;QAEEC,OAAO,EAAE,SAFX;QAGEC,OAAO,EAAE;MAHX,CADI;IA1CM,CAAd;IAmDA,MAAMC,mBAAkB,GAAIlB,QAAQ,CAAC;MACnCmB,OAAO,EAAE;IAD0B,CAAD,CAApC;;IAGA,MAAMC,YAAW,GAAIC,IAAG,IAAK;MAC3B,IAAIC,KAAI,GAAIJ,mBAAmB,CAACC,OAApB,CAA4BI,OAA5B,CAAoCF,IAApC,CAAZ;;MAEA,IAAIC,KAAI,KAAM,CAAC,CAAf,EAAkB;QAChBJ,mBAAmB,CAACC,OAApB,CAA4BK,MAA5B,CAAmCF,KAAnC,EAA0C,CAA1C;MACF;IACD,CAND;;IAQA,MAAMG,SAAQ,GAAI,MAAM;MACtBP,mBAAmB,CAACC,OAApB,CAA4BO,IAA5B,CAAiC;QAC/BC,KAAK,EAAE,EADwB;QAE/BC,GAAG,EAAEC,IAAI,CAACC,GAAL;MAF0B,CAAjC;IAID,CALD;;IAOA,MAAMC,QAAO,GAAI,MAAM;MACrB3B,OAAO,CAACuB,KAAR,CACKK,QADL,GAEKC,IAFL,CAEU,MAAM;QACVC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsB9B,SAAtB,EAAiCH,KAAK,CAACG,SAAD,CAAtC;MACD,CAJL,EAKK+B,KALL,CAKWC,KAAI,IAAK;QACdH,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBE,KAArB;MACD,CAPL;IAQD,CATD;;IAWA,MAAMC,SAAQ,GAAI,MAAM;MACtBlC,OAAO,CAACuB,KAAR,CAAcY,WAAd;IACD,CAFD;;IAIA,OAAO;MACLnC,OADK;MAEL;MACA;MACA;MACA;MACA;MACA;MACA;MACAC,SATK;MAULS,KAVK;MAWLiB,QAXK;MAYLO,SAZK;MAaLb,SAbK;MAcLL,YAdK;MAeLF;IAfK,CAAP;EAiBD;;AAjH4B,CAAD,CAA9B","names":["defineComponent","reactive","ref","toRaw","setup","formRef","formState","title","param","choice","date1","undefined","resource","desc","voter","rules","required","message","trigger","dynamicValidateForm","domains","removeDomain","item","index","indexOf","splice","addDomain","push","value","key","Date","now","onSubmit","validate","then","console","log","catch","error","resetForm","resetFields"],"sourceRoot":"","sources":["/home/ubuntu/voting/vue-web/src/views/InitVote/avec/ReAVEC.vue"],"sourcesContent":["<template>\r\n  <div class=\"main\" >\r\n    <a-typography-title :level=\"3\" style=\"text-align:center\">更新投票</a-typography-title>\r\n    <a-form\r\n        ref=\"formRef\"\r\n        :model=\"formState\"\r\n        :rules=\"rules\"\r\n\r\n    >\r\n      <a-form-item label=\"输入投票标题\" name=\"title\"\r\n                   :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-input v-model:value=\"formState.title\"  placeholder=\"投票标题\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"选择投票时间\" required name=\"date1\" :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-range-picker\r\n            v-model:value=\"formState.date1\"\r\n            show-time\r\n            type=\"date\"\r\n            placeholder=\"选择日期\"\r\n            style=\"width: 100%\">\r\n        </a-range-picker>\r\n      </a-form-item>\r\n\r\n\r\n      <a-form-item label=\"输入投票选项\" name=\"choice\" :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-input v-model:value=\"formState.choice\" style=\"width: 90%; margin-right: 8px\" placeholder=\"选项\"/>\r\n        <PlusCircleOutlined class=\"dynamic-delete-button\" @click=\"addDomain\" />\r\n        <!--        <div style=\"padding-top: 25px\"></div>-->\r\n      </a-form-item>\r\n\r\n      <a-form-item\r\n          :wrapper-col=\"{ lg: {span: 10}, sm: {span: 20}, offset: 7 }\"\r\n\r\n          v-for=\"(domain, index) in dynamicValidateForm.domains\"\r\n          :key=\"domain.key\"\r\n          :name=\"['domains', index, 'value']\">\r\n        <a-input\r\n\r\n            v-model:value=\"domain.value\"\r\n            placeholder=\"选项\"\r\n            style=\"width: 90%; margin-right: 8px\"\r\n\r\n        />\r\n        <MinusCircleOutlined\r\n\r\n            v-if=\"dynamicValidateForm.domains.length > 0\"\r\n            class=\"dynamic-delete-button\"\r\n            :disabled=\"dynamicValidateForm.domains.length === 1\"\r\n            @click=\"removeDomain(domain)\"\r\n        />\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"投票类型\" name=\"resource\" :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-radio-group v-model:value=\"formState.resource\">\r\n          <a-radio value=\"1\">单选</a-radio>\r\n          <a-radio value=\"2\">多选</a-radio>\r\n          <a-radio value=\"3\">分数</a-radio>\r\n\r\n        </a-radio-group>\r\n      </a-form-item>\r\n      <a-form-item label=\"输入加密参数\" name=\"param\" :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-input v-model:value=\"formState.param\"  placeholder=\"加密参数\"/>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"输入投票者列表\" name=\"voter\" :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-textarea\r\n            v-model:value=\"formState.voter\"  placeholder=\"投票者列表\"  :auto-size=\"{ minRows: 1, maxRows: 3 }\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"投票备注\" name=\"desc\" :labelCol=\"{lg: {span: 7}, sm: {span: 7}}\"\r\n                   :wrapperCol=\"{lg: {span: 10}, sm: {span: 20}}\">\r\n        <a-textarea v-model:value=\"formState.desc\" placeholder=\"备注\" showCount :maxlength=\"100\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item :wrapperCol=\"{ span: 24 }\"\r\n                   style=\"text-align: center\">\r\n        <a-button type=\"primary\" @click=\"onSubmit\">提交</a-button>\r\n        <a-button style=\"margin-left: 60px\" @click=\"resetForm\">重置</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport { defineComponent, reactive, ref, toRaw } from 'vue';\r\nexport default defineComponent({\r\n  setup() {\r\n    const formRef = ref();\r\n    const formState = reactive({\r\n      title: '',\r\n      param: '',\r\n      choice: '',\r\n      date1: undefined,\r\n      resource: '',\r\n      desc: '',\r\n      voter: '',\r\n    });\r\n    const rules = {\r\n      title: [\r\n        {\r\n          required: true,\r\n          message: '请输入投票标题',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n      voter: [\r\n        {\r\n          required: true,\r\n          message: '请输入投票标题',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n      choice: [\r\n        {\r\n          required: true,\r\n          message: '请输入投票选项',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n      param: [\r\n        {\r\n          required: true,\r\n          message: '请输入加密参数',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n      date1: [\r\n        {\r\n          required: true,\r\n          message: '请选择投票日期',\r\n        },\r\n      ],\r\n      resource: [\r\n        {\r\n          required: true,\r\n          message: '请选择选项形式',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n      desc: [\r\n        {\r\n          required: true,\r\n          message: '请输入投票备注',\r\n          trigger: 'change',\r\n        },\r\n      ],\r\n    };\r\n\r\n    const dynamicValidateForm = reactive({\r\n      domains: [],\r\n    });\r\n    const removeDomain = item => {\r\n      let index = dynamicValidateForm.domains.indexOf(item);\r\n\r\n      if (index !== -1) {\r\n        dynamicValidateForm.domains.splice(index, 1);\r\n      }\r\n    };\r\n\r\n    const addDomain = () => {\r\n      dynamicValidateForm.domains.push({\r\n        value: '',\r\n        key: Date.now(),\r\n      });\r\n    };\r\n\r\n    const onSubmit = () => {\r\n      formRef.value\r\n          .validate()\r\n          .then(() => {\r\n            console.log('values', formState, toRaw(formState));\r\n          })\r\n          .catch(error => {\r\n            console.log('error', error);\r\n          });\r\n    };\r\n\r\n    const resetForm = () => {\r\n      formRef.value.resetFields();\r\n    };\r\n\r\n    return {\r\n      formRef,\r\n      // labelCol: {\r\n      //   span: 4,\r\n      // },\r\n      // wrapperCol: {\r\n      //   span:15,\r\n      // },\r\n      // other: '',\r\n      formState,\r\n      rules,\r\n      onSubmit,\r\n      resetForm,\r\n      addDomain,\r\n      removeDomain,\r\n      dynamicValidateForm,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\n.main {\r\n  /*min-width: 360px;*/\r\n  /*margin: 0 auto;*/\r\n}\r\n.dynamic-delete-button {\r\n  cursor: pointer;\r\n  position: relative;\r\n  top: 4px;\r\n  font-size: 24px;\r\n  color: #305f8a;\r\n  transition: all 0.3s;\r\n}\r\n.dynamic-delete-button:hover {\r\n  color: #107de1;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}