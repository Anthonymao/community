{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nimport { addClass, hasClass, removeClass, getComputedStyle, getTrimmingContainer, innerWidth, innerHeight, offset, outerHeight, outerWidth } from \"../../../helpers/dom/element.mjs\";\nimport { stopImmediatePropagation } from \"../../../helpers/dom/event.mjs\";\nimport { objectEach } from \"../../../helpers/object.mjs\";\nimport { isMobileBrowser } from \"../../../helpers/browser.mjs\";\n/**\n *\n */\n\nvar Border = /*#__PURE__*/function () {\n  // TODO As this is an internal class, should be designed for using {Walkontable}. It uses the facade,\n  // TODO Con. Because the class is created on place where the instance reference comes from external origin.\n  // TODO Imho, the discrimination for handling both, facade and non-facade should be handled.\n\n  /**\n   * @param {WalkontableFacade} wotInstance The Walkontable instance.\n   * @param {object} settings The border settings.\n   */\n  function Border(wotInstance, settings) {\n    _classCallCheck(this, Border);\n\n    if (!settings) {\n      return;\n    }\n\n    this.eventManager = wotInstance.eventManager;\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n    this.top = null;\n    this.bottom = null;\n    this.start = null;\n    this.end = null;\n    this.topStyle = null;\n    this.bottomStyle = null;\n    this.startStyle = null;\n    this.endStyle = null;\n    this.cornerDefaultStyle = {\n      width: '6px',\n      height: '6px',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    }; // Offset to moving the corner to be centered relative to the grid.\n\n    this.cornerCenterPointOffset = -(parseInt(this.cornerDefaultStyle.width, 10) / 2);\n    this.corner = null;\n    this.cornerStyle = null;\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n  /**\n   * Register all necessary events.\n   */\n\n\n  _createClass(Border, [{\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this2 = this;\n\n      var documentBody = this.wot.rootDocument.body;\n      this.eventManager.addEventListener(documentBody, 'mousedown', function () {\n        return _this2.onMouseDown();\n      });\n      this.eventManager.addEventListener(documentBody, 'mouseup', function () {\n        return _this2.onMouseUp();\n      });\n\n      var _loop = function _loop(c, len) {\n        var element = _this2.main.childNodes[c];\n\n        _this2.eventManager.addEventListener(element, 'mouseenter', function (event) {\n          return _this2.onMouseEnter(event, _this2.main.childNodes[c]);\n        });\n      };\n\n      for (var c = 0, len = this.main.childNodes.length; c < len; c++) {\n        _loop(c, len);\n      }\n    }\n    /**\n     * Mouse down listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown() {\n      this.mouseDown = true;\n    }\n    /**\n     * Mouse up listener.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      this.mouseDown = false;\n    }\n    /**\n     * Mouse enter listener for fragment selection functionality.\n     *\n     * @private\n     * @param {Event} event Dom event.\n     * @param {HTMLElement} parentElement Part of border element.\n     */\n\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter(event, parentElement) {\n      if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n        return;\n      }\n\n      event.preventDefault();\n      stopImmediatePropagation(event);\n\n      var _this = this;\n\n      var documentBody = this.wot.rootDocument.body;\n      var bounds = parentElement.getBoundingClientRect(); // Hide border to prevents selection jumping when fragmentSelection is enabled.\n\n      parentElement.style.display = 'none';\n      /**\n       * @param {Event} mouseEvent The mouse event object.\n       * @returns {boolean}\n       */\n\n      function isOutside(mouseEvent) {\n        if (mouseEvent.clientY < Math.floor(bounds.top)) {\n          return true;\n        }\n\n        if (mouseEvent.clientY > Math.ceil(bounds.top + bounds.height)) {\n          return true;\n        }\n\n        if (mouseEvent.clientX < Math.floor(bounds.left)) {\n          return true;\n        }\n\n        if (mouseEvent.clientX > Math.ceil(bounds.left + bounds.width)) {\n          return true;\n        }\n      }\n      /**\n       * @param {Event} handlerEvent The mouse event object.\n       */\n\n\n      function handler(handlerEvent) {\n        if (isOutside(handlerEvent)) {\n          _this.eventManager.removeEventListener(documentBody, 'mousemove', handler);\n\n          parentElement.style.display = 'block';\n        }\n      }\n\n      this.eventManager.addEventListener(documentBody, 'mousemove', handler);\n    }\n    /**\n     * Create border elements.\n     *\n     * @param {object} settings The border settings.\n     */\n\n  }, {\n    key: \"createBorders\",\n    value: function createBorders(settings) {\n      var rootDocument = this.wot.rootDocument;\n      this.main = rootDocument.createElement('div');\n      var borderDivs = ['top', 'start', 'bottom', 'end', 'corner'];\n      var style = this.main.style;\n      style.position = 'absolute';\n      style.top = 0;\n      style.left = 0;\n\n      for (var i = 0; i < 5; i++) {\n        var position = borderDivs[i];\n        var div = rootDocument.createElement('div');\n        div.className = \"wtBorder \".concat(this.settings.className || ''); // + borderDivs[i];\n\n        if (this.settings[position] && this.settings[position].hide) {\n          div.className += ' hidden';\n        }\n\n        style = div.style;\n        style.backgroundColor = this.settings[position] && this.settings[position].color ? this.settings[position].color : settings.border.color;\n        style.height = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        style.width = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        this.main.appendChild(div);\n      }\n\n      this.top = this.main.childNodes[0];\n      this.start = this.main.childNodes[1];\n      this.bottom = this.main.childNodes[2];\n      this.end = this.main.childNodes[3];\n      this.topStyle = this.top.style;\n      this.startStyle = this.start.style;\n      this.bottomStyle = this.bottom.style;\n      this.endStyle = this.end.style;\n      this.corner = this.main.childNodes[4];\n      this.corner.className += ' corner';\n      this.cornerStyle = this.corner.style;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n      this.cornerStyle.height = this.cornerDefaultStyle.height;\n      this.cornerStyle.border = [this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor].join(' ');\n\n      if (isMobileBrowser()) {\n        this.createMultipleSelectorHandles();\n      }\n\n      this.disappear();\n      var wtTable = this.wot.wtTable;\n      var bordersHolder = wtTable.bordersHolder;\n\n      if (!bordersHolder) {\n        bordersHolder = rootDocument.createElement('div');\n        bordersHolder.className = 'htBorders';\n        wtTable.bordersHolder = bordersHolder;\n        wtTable.spreader.appendChild(bordersHolder);\n      }\n\n      bordersHolder.appendChild(this.main);\n    }\n    /**\n     * Create multiple selector handler for mobile devices.\n     */\n\n  }, {\n    key: \"createMultipleSelectorHandles\",\n    value: function createMultipleSelectorHandles() {\n      var _this3 = this;\n\n      var rootDocument = this.wot.rootDocument;\n      this.selectionHandles = {\n        top: rootDocument.createElement('DIV'),\n        topHitArea: rootDocument.createElement('DIV'),\n        bottom: rootDocument.createElement('DIV'),\n        bottomHitArea: rootDocument.createElement('DIV')\n      };\n      var width = 10;\n      var hitAreaWidth = 40;\n      this.selectionHandles.top.className = 'topSelectionHandle topLeftSelectionHandle';\n      this.selectionHandles.topHitArea.className = 'topSelectionHandle-HitArea topLeftSelectionHandle-HitArea';\n      this.selectionHandles.bottom.className = 'bottomSelectionHandle bottomRightSelectionHandle';\n      this.selectionHandles.bottomHitArea.className = 'bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea';\n      this.selectionHandles.styles = {\n        top: this.selectionHandles.top.style,\n        topHitArea: this.selectionHandles.topHitArea.style,\n        bottom: this.selectionHandles.bottom.style,\n        bottomHitArea: this.selectionHandles.bottomHitArea.style\n      };\n      var hitAreaStyle = {\n        position: 'absolute',\n        height: \"\".concat(hitAreaWidth, \"px\"),\n        width: \"\".concat(hitAreaWidth, \"px\"),\n        'border-radius': \"\".concat(parseInt(hitAreaWidth / 1.5, 10), \"px\")\n      };\n      objectEach(hitAreaStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomHitArea[key] = value;\n        _this3.selectionHandles.styles.topHitArea[key] = value;\n      });\n      var handleStyle = {\n        position: 'absolute',\n        height: \"\".concat(width, \"px\"),\n        width: \"\".concat(width, \"px\"),\n        'border-radius': \"\".concat(parseInt(width / 1.5, 10), \"px\"),\n        background: '#F5F5FF',\n        border: '1px solid #4285c8'\n      };\n      objectEach(handleStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottom[key] = value;\n        _this3.selectionHandles.styles.top[key] = value;\n      });\n      this.main.appendChild(this.selectionHandles.top);\n      this.main.appendChild(this.selectionHandles.bottom);\n      this.main.appendChild(this.selectionHandles.topHitArea);\n      this.main.appendChild(this.selectionHandles.bottomHitArea);\n    }\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isPartRange\",\n    value: function isPartRange(row, col) {\n      var areaSelection = this.wot.selections.createOrGetArea();\n\n      if (areaSelection.cellRange) {\n        if (row !== areaSelection.cellRange.to.row || col !== areaSelection.cellRange.to.col) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @param {number} top The top position of the handler.\n     * @param {number} left The left position of the handler.\n     * @param {number} width The width of the handler.\n     * @param {number} height The height of the handler.\n     */\n\n  }, {\n    key: \"updateMultipleSelectionHandlesPosition\",\n    value: function updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      var _this$selectionHandle = this.selectionHandles.styles,\n          topStyles = _this$selectionHandle.top,\n          topHitAreaStyles = _this$selectionHandle.topHitArea,\n          bottomStyles = _this$selectionHandle.bottom,\n          bottomHitAreaStyles = _this$selectionHandle.bottomHitArea;\n      var handleBorderSize = parseInt(topStyles.borderWidth, 10);\n      var handleSize = parseInt(topStyles.width, 10);\n      var hitAreaSize = parseInt(topHitAreaStyles.width, 10);\n      var totalTableWidth = this.wot.wtTable.getWidth();\n      var totalTableHeight = this.wot.wtTable.getHeight();\n      topStyles.top = \"\".concat(parseInt(top - handleSize - 1, 10), \"px\");\n      topStyles[inlinePosProperty] = \"\".concat(parseInt(left - handleSize - 1, 10), \"px\");\n      topHitAreaStyles.top = \"\".concat(parseInt(top - hitAreaSize / 4 * 3, 10), \"px\");\n      topHitAreaStyles[inlinePosProperty] = \"\".concat(parseInt(left - hitAreaSize / 4 * 3, 10), \"px\");\n      var bottomHandlerInline = Math.min(parseInt(left + width, 10), totalTableWidth - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaInline = Math.min(parseInt(left + width - hitAreaSize / 4, 10), totalTableWidth - hitAreaSize - handleBorderSize * 2);\n      bottomStyles[inlinePosProperty] = \"\".concat(bottomHandlerInline, \"px\");\n      bottomHitAreaStyles[inlinePosProperty] = \"\".concat(bottomHandlerAreaInline, \"px\");\n      var bottomHandlerTop = Math.min(parseInt(top + height, 10), totalTableHeight - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaTop = Math.min(parseInt(top + height - hitAreaSize / 4, 10), totalTableHeight - hitAreaSize - handleBorderSize * 2);\n      bottomStyles.top = \"\".concat(bottomHandlerTop, \"px\");\n      bottomHitAreaStyles.top = \"\".concat(bottomHandlerAreaTop, \"px\");\n\n      if (this.settings.border.cornerVisible && this.settings.border.cornerVisible()) {\n        topStyles.display = 'block';\n        topHitAreaStyles.display = 'block';\n\n        if (this.isPartRange(row, col)) {\n          bottomStyles.display = 'none';\n          bottomHitAreaStyles.display = 'none';\n        } else {\n          bottomStyles.display = 'block';\n          bottomHitAreaStyles.display = 'block';\n        }\n      } else {\n        topStyles.display = 'none';\n        bottomStyles.display = 'none';\n        topHitAreaStyles.display = 'none';\n        bottomHitAreaStyles.display = 'none';\n      }\n\n      if (row === this.wot.wtSettings.getSetting('fixedRowsTop') || col === this.wot.wtSettings.getSetting('fixedColumnsStart')) {\n        topStyles.zIndex = '9999';\n        topHitAreaStyles.zIndex = '9999';\n      } else {\n        topStyles.zIndex = '';\n        topHitAreaStyles.zIndex = '';\n      }\n    }\n    /**\n     * Show border around one or many cells.\n     *\n     * @param {Array} corners The corner coordinates.\n     */\n\n  }, {\n    key: \"appear\",\n    value: function appear(corners) {\n      if (this.disabled) {\n        return;\n      }\n\n      var _this$wot = this.wot,\n          wtTable = _this$wot.wtTable,\n          rootDocument = _this$wot.rootDocument,\n          rootWindow = _this$wot.rootWindow; // todo refactoring: consider about using internal facade (it is given by external code)\n\n      var fromRow;\n      var toRow;\n      var fromColumn;\n      var toColumn;\n      var rowHeader;\n      var columnHeader;\n      var rowsCount = wtTable.getRenderedRowsCount();\n\n      for (var i = 0; i < rowsCount; i += 1) {\n        var s = wtTable.rowFilter.renderedToSource(i);\n\n        if (s >= corners[0] && s <= corners[2]) {\n          fromRow = s;\n          rowHeader = corners[0];\n          break;\n        }\n      }\n\n      for (var _i = rowsCount - 1; _i >= 0; _i -= 1) {\n        var _s = wtTable.rowFilter.renderedToSource(_i);\n\n        if (_s >= corners[0] && _s <= corners[2]) {\n          toRow = _s;\n          break;\n        }\n      }\n\n      var columnsCount = wtTable.getRenderedColumnsCount();\n\n      for (var _i2 = 0; _i2 < columnsCount; _i2 += 1) {\n        var _s2 = wtTable.columnFilter.renderedToSource(_i2);\n\n        if (_s2 >= corners[1] && _s2 <= corners[3]) {\n          fromColumn = _s2;\n          columnHeader = corners[1];\n          break;\n        }\n      }\n\n      for (var _i3 = columnsCount - 1; _i3 >= 0; _i3 -= 1) {\n        var _s3 = wtTable.columnFilter.renderedToSource(_i3);\n\n        if (_s3 >= corners[1] && _s3 <= corners[3]) {\n          toColumn = _s3;\n          break;\n        }\n      }\n\n      if (fromRow === void 0 || fromColumn === void 0) {\n        this.disappear();\n        return;\n      }\n\n      var fromTD = wtTable.getCell(this.wot.createCellCoords(fromRow, fromColumn));\n      var isMultiple = fromRow !== toRow || fromColumn !== toColumn;\n      var toTD = isMultiple ? wtTable.getCell(this.wot.createCellCoords(toRow, toColumn)) : fromTD;\n      var fromOffset = offset(fromTD);\n      var toOffset = isMultiple ? offset(toTD) : fromOffset;\n      var containerOffset = offset(wtTable.TABLE);\n      var containerWidth = outerWidth(wtTable.TABLE);\n      var minTop = fromOffset.top;\n      var minLeft = fromOffset.left;\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlineStartPos = 0;\n      var width = 0;\n\n      if (isRtl) {\n        var fromWidth = outerWidth(fromTD);\n        var gridRightPos = rootWindow.innerWidth - containerOffset.left - containerWidth;\n        width = minLeft + fromWidth - toOffset.left;\n        inlineStartPos = rootWindow.innerWidth - minLeft - fromWidth - gridRightPos - 1;\n      } else {\n        width = toOffset.left + outerWidth(toTD) - minLeft;\n        inlineStartPos = minLeft - containerOffset.left - 1;\n      }\n\n      if (this.isEntireColumnSelected(fromRow, toRow)) {\n        var modifiedValues = this.getDimensionsFromHeader('columns', fromColumn, toColumn, rowHeader, containerOffset);\n        var fromTH = null;\n\n        if (modifiedValues) {\n          var _modifiedValues = _slicedToArray(modifiedValues, 3);\n\n          fromTH = _modifiedValues[0];\n          inlineStartPos = _modifiedValues[1];\n          width = _modifiedValues[2];\n        }\n\n        if (fromTH) {\n          fromTD = fromTH;\n        }\n      }\n\n      var top = minTop - containerOffset.top - 1;\n      var height = toOffset.top + outerHeight(toTD) - minTop;\n\n      if (this.isEntireRowSelected(fromColumn, toColumn)) {\n        var _modifiedValues2 = this.getDimensionsFromHeader('rows', fromRow, toRow, columnHeader, containerOffset);\n\n        var _fromTH = null;\n\n        if (_modifiedValues2) {\n          var _modifiedValues3 = _slicedToArray(_modifiedValues2, 3);\n\n          _fromTH = _modifiedValues3[0];\n          top = _modifiedValues3[1];\n          height = _modifiedValues3[2];\n        }\n\n        if (_fromTH) {\n          fromTD = _fromTH;\n        }\n      }\n\n      var style = getComputedStyle(fromTD, rootWindow);\n\n      if (parseInt(style.borderTopWidth, 10) > 0) {\n        top += 1;\n        height = height > 0 ? height - 1 : 0;\n      }\n\n      if (parseInt(style[isRtl ? 'borderRightWidth' : 'borderLeftWidth'], 10) > 0) {\n        inlineStartPos += 1;\n        width = width > 0 ? width - 1 : 0;\n      }\n\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      this.topStyle.top = \"\".concat(top, \"px\");\n      this.topStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.topStyle.width = \"\".concat(width, \"px\");\n      this.topStyle.display = 'block';\n      this.startStyle.top = \"\".concat(top, \"px\");\n      this.startStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.startStyle.height = \"\".concat(height, \"px\");\n      this.startStyle.display = 'block';\n      var delta = Math.floor(this.settings.border.width / 2);\n      this.bottomStyle.top = \"\".concat(top + height - delta, \"px\");\n      this.bottomStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.bottomStyle.width = \"\".concat(width, \"px\");\n      this.bottomStyle.display = 'block';\n      this.endStyle.top = \"\".concat(top, \"px\");\n      this.endStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width - delta, \"px\");\n      this.endStyle.height = \"\".concat(height + 1, \"px\");\n      this.endStyle.display = 'block';\n      var cornerVisibleSetting = this.settings.border.cornerVisible;\n      cornerVisibleSetting = typeof cornerVisibleSetting === 'function' ? cornerVisibleSetting(this.settings.layerLevel) : cornerVisibleSetting;\n      var hookResult = this.wot.getSetting('onModifyGetCellCoords', toRow, toColumn);\n      var checkRow = toRow,\n          checkCol = toColumn;\n\n      if (hookResult && Array.isArray(hookResult)) {\n        var _hookResult = _slicedToArray(hookResult, 4);\n\n        checkRow = _hookResult[2];\n        checkCol = _hookResult[3];\n      }\n\n      if (isMobileBrowser() || !cornerVisibleSetting || this.isPartRange(checkRow, checkCol)) {\n        this.cornerStyle.display = 'none';\n      } else {\n        this.cornerStyle.top = \"\".concat(top + height + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n        this.cornerStyle.width = this.cornerDefaultStyle.width; // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n\n        this.cornerStyle.display = 'none';\n        var trimmingContainer = getTrimmingContainer(wtTable.TABLE);\n        var trimToWindow = trimmingContainer === rootWindow;\n\n        if (trimToWindow) {\n          trimmingContainer = rootDocument.documentElement;\n        }\n\n        var cornerHalfWidth = parseInt(this.cornerDefaultStyle.width, 10) / 2;\n        var cornerHalfHeight = parseInt(this.cornerDefaultStyle.height, 10) / 2;\n\n        if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n          var toTdOffsetLeft = trimToWindow ? toTD.getBoundingClientRect().left : toTD.offsetLeft;\n          var cornerOverlappingContainer = false;\n          var cornerEdge = 0;\n\n          if (isRtl) {\n            cornerEdge = toTdOffsetLeft - parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge < 0;\n          } else {\n            cornerEdge = toTdOffsetLeft + outerWidth(toTD) + parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge >= innerWidth(trimmingContainer);\n          }\n\n          if (cornerOverlappingContainer) {\n            this.cornerStyle[inlinePosProperty] = \"\".concat(Math.floor(inlineStartPos + width + this.cornerCenterPointOffset - cornerHalfWidth), \"px\");\n            this.cornerStyle[isRtl ? 'borderLeftWidth' : 'borderRightWidth'] = 0;\n          }\n        }\n\n        if (toRow === this.wot.getSetting('totalRows') - 1) {\n          var toTdOffsetTop = trimToWindow ? toTD.getBoundingClientRect().top : toTD.offsetTop;\n          var cornerBottomEdge = toTdOffsetTop + outerHeight(toTD) + parseInt(this.cornerDefaultStyle.height, 10) / 2;\n\n          var _cornerOverlappingContainer = cornerBottomEdge >= innerHeight(trimmingContainer);\n\n          if (_cornerOverlappingContainer) {\n            this.cornerStyle.top = \"\".concat(Math.floor(top + height + this.cornerCenterPointOffset - cornerHalfHeight), \"px\");\n            this.cornerStyle.borderBottomWidth = 0;\n          }\n        }\n\n        this.cornerStyle.display = 'block';\n      }\n\n      if (isMobileBrowser()) {\n        this.updateMultipleSelectionHandlesPosition(toRow, toColumn, top, inlineStartPos, width, height);\n      }\n    }\n    /**\n     * Check whether an entire column of cells is selected.\n     *\n     * @private\n     * @param {number} startRowIndex Start row index.\n     * @param {number} endRowIndex End row index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isEntireColumnSelected\",\n    value: function isEntireColumnSelected(startRowIndex, endRowIndex) {\n      return startRowIndex === this.wot.wtTable.getFirstRenderedRow() && endRowIndex === this.wot.wtTable.getLastRenderedRow();\n    }\n    /**\n     * Check whether an entire row of cells is selected.\n     *\n     * @private\n     * @param {number} startColumnIndex Start column index.\n     * @param {number} endColumnIndex End column index.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isEntireRowSelected\",\n    value: function isEntireRowSelected(startColumnIndex, endColumnIndex) {\n      return startColumnIndex === this.wot.wtTable.getFirstRenderedColumn() && endColumnIndex === this.wot.wtTable.getLastRenderedColumn();\n    }\n    /**\n     * Get left/top index and width/height depending on the `direction` provided.\n     *\n     * @private\n     * @param {string} direction `rows` or `columns`, defines if an entire column or row is selected.\n     * @param {number} fromIndex Start index of the selection.\n     * @param {number} toIndex End index of the selection.\n     * @param {number} headerIndex The header index as negative value.\n     * @param {number} containerOffset Offset of the container.\n     * @returns {Array|boolean} Returns an array of [headerElement, left, width] or [headerElement, top, height], depending on `direction` (`false` in case of an error getting the headers).\n     */\n\n  }, {\n    key: \"getDimensionsFromHeader\",\n    value: function getDimensionsFromHeader(direction, fromIndex, toIndex, headerIndex, containerOffset) {\n      var wtTable = this.wot.wtTable;\n      var rootHotElement = wtTable.wtRootElement.parentNode;\n      var getHeaderFn = null;\n      var dimensionFn = null;\n      var entireSelectionClassname = null;\n      var index = null;\n      var dimension = null;\n      var dimensionProperty = null;\n      var startHeader = null;\n      var endHeader = null;\n\n      switch (direction) {\n        case 'rows':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getRowHeader.apply(wtTable, arguments);\n          };\n\n          dimensionFn = function dimensionFn() {\n            return outerHeight.apply(void 0, arguments);\n          };\n\n          entireSelectionClassname = 'ht__selection--rows';\n          dimensionProperty = 'top';\n          break;\n\n        case 'columns':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getColumnHeader.apply(wtTable, arguments);\n          };\n\n          dimensionFn = function dimensionFn() {\n            return outerWidth.apply(void 0, arguments);\n          };\n\n          entireSelectionClassname = 'ht__selection--columns';\n          dimensionProperty = 'left';\n          break;\n\n        default:\n      }\n\n      if (rootHotElement.classList.contains(entireSelectionClassname)) {\n        var columnHeaderLevelCount = this.wot.getSetting('columnHeaders').length;\n        startHeader = getHeaderFn(fromIndex, columnHeaderLevelCount - headerIndex);\n        endHeader = getHeaderFn(toIndex, columnHeaderLevelCount - headerIndex);\n\n        if (!startHeader || !endHeader) {\n          return false;\n        }\n\n        var startHeaderOffset = offset(startHeader);\n        var endOffset = offset(endHeader);\n\n        if (startHeader && endHeader) {\n          index = startHeaderOffset[dimensionProperty] - containerOffset[dimensionProperty] - 1;\n          dimension = endOffset[dimensionProperty] + dimensionFn(endHeader) - startHeaderOffset[dimensionProperty];\n        }\n\n        return [startHeader, index, dimension];\n      }\n\n      return false;\n    }\n    /**\n     * Change border style.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {object} border The border object descriptor.\n     */\n\n  }, {\n    key: \"changeBorderStyle\",\n    value: function changeBorderStyle(borderElement, border) {\n      var style = this[borderElement].style;\n      var borderStyle = border[borderElement];\n\n      if (!borderStyle || borderStyle.hide) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        if (hasClass(this[borderElement], 'hidden')) {\n          removeClass(this[borderElement], 'hidden');\n        }\n\n        style.backgroundColor = borderStyle.color;\n\n        if (borderElement === 'top' || borderElement === 'bottom') {\n          style.height = \"\".concat(borderStyle.width, \"px\");\n        }\n\n        if (borderElement === 'start' || borderElement === 'end') {\n          style.width = \"\".concat(borderStyle.width, \"px\");\n        }\n      }\n    }\n    /**\n     * Change border style to default.\n     *\n     * @private\n     * @param {string} position The position type (\"top\", \"bottom\", \"start\", \"end\") to change.\n     */\n\n  }, {\n    key: \"changeBorderToDefaultStyle\",\n    value: function changeBorderToDefaultStyle(position) {\n      var defaultBorder = {\n        width: 1,\n        color: '#000'\n      };\n      var style = this[position].style;\n      style.backgroundColor = defaultBorder.color;\n      style.width = \"\".concat(defaultBorder.width, \"px\");\n      style.height = \"\".concat(defaultBorder.width, \"px\");\n    }\n    /**\n     * Toggle class 'hidden' to element.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {boolean} [remove] Defines type of the action to perform.\n     */\n\n  }, {\n    key: \"toggleHiddenClass\",\n    value: function toggleHiddenClass(borderElement, remove) {\n      this.changeBorderToDefaultStyle(borderElement);\n\n      if (remove) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        removeClass(this[borderElement], 'hidden');\n      }\n    }\n    /**\n     * Hide border.\n     */\n\n  }, {\n    key: \"disappear\",\n    value: function disappear() {\n      this.topStyle.display = 'none';\n      this.bottomStyle.display = 'none';\n      this.startStyle.display = 'none';\n      this.endStyle.display = 'none';\n      this.cornerStyle.display = 'none';\n\n      if (isMobileBrowser()) {\n        this.selectionHandles.styles.top.display = 'none';\n        this.selectionHandles.styles.topHitArea.display = 'none';\n        this.selectionHandles.styles.bottom.display = 'none';\n        this.selectionHandles.styles.bottomHitArea.display = 'none';\n      }\n    }\n    /**\n     * Cleans up all the DOM state related to a Border instance. Call this prior to deleting a Border instance.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroyWithOwnEventsOnly();\n      this.main.parentNode.removeChild(this.main);\n    }\n  }]);\n\n  return Border;\n}();\n\nexport default Border;","map":{"version":3,"names":["_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_arr","_n","_d","_s","_e","next","done","push","value","err","isArray","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","addClass","hasClass","removeClass","getComputedStyle","getTrimmingContainer","innerWidth","innerHeight","offset","outerHeight","outerWidth","stopImmediatePropagation","objectEach","isMobileBrowser","Border","wotInstance","settings","eventManager","wot","mouseDown","main","top","bottom","start","end","topStyle","bottomStyle","startStyle","endStyle","cornerDefaultStyle","width","height","borderWidth","borderStyle","borderColor","cornerCenterPointOffset","parseInt","corner","cornerStyle","createBorders","registerListeners","_this2","documentBody","rootDocument","body","addEventListener","onMouseDown","onMouseUp","_loop","c","element","childNodes","event","onMouseEnter","parentElement","getSetting","preventDefault","_this","bounds","getBoundingClientRect","style","display","isOutside","mouseEvent","clientY","Math","floor","ceil","clientX","left","handler","handlerEvent","removeEventListener","createElement","borderDivs","position","div","className","concat","hide","backgroundColor","color","border","appendChild","join","createMultipleSelectorHandles","disappear","wtTable","bordersHolder","spreader","_this3","selectionHandles","topHitArea","bottomHitArea","hitAreaWidth","styles","hitAreaStyle","handleStyle","background","isPartRange","row","col","areaSelection","selections","createOrGetArea","cellRange","to","updateMultipleSelectionHandlesPosition","isRtl","wtSettings","inlinePosProperty","_this$selectionHandle","topStyles","topHitAreaStyles","bottomStyles","bottomHitAreaStyles","handleBorderSize","handleSize","hitAreaSize","totalTableWidth","getWidth","totalTableHeight","getHeight","bottomHandlerInline","min","bottomHandlerAreaInline","bottomHandlerTop","bottomHandlerAreaTop","cornerVisible","zIndex","appear","corners","disabled","_this$wot","rootWindow","fromRow","toRow","fromColumn","toColumn","rowHeader","columnHeader","rowsCount","getRenderedRowsCount","s","rowFilter","renderedToSource","columnsCount","getRenderedColumnsCount","_i2","_s2","columnFilter","_i3","_s3","fromTD","getCell","createCellCoords","isMultiple","toTD","fromOffset","toOffset","containerOffset","TABLE","containerWidth","minTop","minLeft","inlineStartPos","fromWidth","gridRightPos","isEntireColumnSelected","modifiedValues","getDimensionsFromHeader","fromTH","_modifiedValues","isEntireRowSelected","_modifiedValues2","_fromTH","_modifiedValues3","borderTopWidth","delta","cornerVisibleSetting","layerLevel","hookResult","checkRow","checkCol","_hookResult","borderRightWidth","trimmingContainer","trimToWindow","documentElement","cornerHalfWidth","cornerHalfHeight","toTdOffsetLeft","offsetLeft","cornerOverlappingContainer","cornerEdge","toTdOffsetTop","offsetTop","cornerBottomEdge","_cornerOverlappingContainer","borderBottomWidth","startRowIndex","endRowIndex","getFirstRenderedRow","getLastRenderedRow","startColumnIndex","endColumnIndex","getFirstRenderedColumn","getLastRenderedColumn","direction","fromIndex","toIndex","headerIndex","rootHotElement","wtRootElement","parentNode","getHeaderFn","dimensionFn","entireSelectionClassname","index","dimension","dimensionProperty","startHeader","endHeader","getRowHeader","apply","arguments","getColumnHeader","classList","contains","columnHeaderLevelCount","startHeaderOffset","endOffset","changeBorderStyle","borderElement","changeBorderToDefaultStyle","defaultBorder","toggleHiddenClass","remove","destroy","destroyWithOwnEventsOnly","removeChild"],"sources":["/home/ubuntu/community/vue-web/node_modules/handsontable/3rdparty/walkontable/src/border.mjs"],"sourcesContent":["function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nimport { addClass, hasClass, removeClass, getComputedStyle, getTrimmingContainer, innerWidth, innerHeight, offset, outerHeight, outerWidth } from \"../../../helpers/dom/element.mjs\";\nimport { stopImmediatePropagation } from \"../../../helpers/dom/event.mjs\";\nimport { objectEach } from \"../../../helpers/object.mjs\";\nimport { isMobileBrowser } from \"../../../helpers/browser.mjs\"; /**\n                                                                 *\n                                                                 */\nvar Border = /*#__PURE__*/function () {\n  // TODO As this is an internal class, should be designed for using {Walkontable}. It uses the facade,\n  // TODO Con. Because the class is created on place where the instance reference comes from external origin.\n  // TODO Imho, the discrimination for handling both, facade and non-facade should be handled.\n  /**\n   * @param {WalkontableFacade} wotInstance The Walkontable instance.\n   * @param {object} settings The border settings.\n   */\n  function Border(wotInstance, settings) {\n    _classCallCheck(this, Border);\n    if (!settings) {\n      return;\n    }\n    this.eventManager = wotInstance.eventManager;\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n    this.top = null;\n    this.bottom = null;\n    this.start = null;\n    this.end = null;\n    this.topStyle = null;\n    this.bottomStyle = null;\n    this.startStyle = null;\n    this.endStyle = null;\n    this.cornerDefaultStyle = {\n      width: '6px',\n      height: '6px',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    };\n    // Offset to moving the corner to be centered relative to the grid.\n    this.cornerCenterPointOffset = -(parseInt(this.cornerDefaultStyle.width, 10) / 2);\n    this.corner = null;\n    this.cornerStyle = null;\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n\n  /**\n   * Register all necessary events.\n   */\n  _createClass(Border, [{\n    key: \"registerListeners\",\n    value: function registerListeners() {\n      var _this2 = this;\n      var documentBody = this.wot.rootDocument.body;\n      this.eventManager.addEventListener(documentBody, 'mousedown', function () {\n        return _this2.onMouseDown();\n      });\n      this.eventManager.addEventListener(documentBody, 'mouseup', function () {\n        return _this2.onMouseUp();\n      });\n      var _loop = function _loop(c, len) {\n        var element = _this2.main.childNodes[c];\n        _this2.eventManager.addEventListener(element, 'mouseenter', function (event) {\n          return _this2.onMouseEnter(event, _this2.main.childNodes[c]);\n        });\n      };\n      for (var c = 0, len = this.main.childNodes.length; c < len; c++) {\n        _loop(c, len);\n      }\n    }\n\n    /**\n     * Mouse down listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown() {\n      this.mouseDown = true;\n    }\n\n    /**\n     * Mouse up listener.\n     *\n     * @private\n     */\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp() {\n      this.mouseDown = false;\n    }\n\n    /**\n     * Mouse enter listener for fragment selection functionality.\n     *\n     * @private\n     * @param {Event} event Dom event.\n     * @param {HTMLElement} parentElement Part of border element.\n     */\n  }, {\n    key: \"onMouseEnter\",\n    value: function onMouseEnter(event, parentElement) {\n      if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n        return;\n      }\n      event.preventDefault();\n      stopImmediatePropagation(event);\n      var _this = this;\n      var documentBody = this.wot.rootDocument.body;\n      var bounds = parentElement.getBoundingClientRect();\n\n      // Hide border to prevents selection jumping when fragmentSelection is enabled.\n      parentElement.style.display = 'none';\n\n      /**\n       * @param {Event} mouseEvent The mouse event object.\n       * @returns {boolean}\n       */\n      function isOutside(mouseEvent) {\n        if (mouseEvent.clientY < Math.floor(bounds.top)) {\n          return true;\n        }\n        if (mouseEvent.clientY > Math.ceil(bounds.top + bounds.height)) {\n          return true;\n        }\n        if (mouseEvent.clientX < Math.floor(bounds.left)) {\n          return true;\n        }\n        if (mouseEvent.clientX > Math.ceil(bounds.left + bounds.width)) {\n          return true;\n        }\n      }\n\n      /**\n       * @param {Event} handlerEvent The mouse event object.\n       */\n      function handler(handlerEvent) {\n        if (isOutside(handlerEvent)) {\n          _this.eventManager.removeEventListener(documentBody, 'mousemove', handler);\n          parentElement.style.display = 'block';\n        }\n      }\n      this.eventManager.addEventListener(documentBody, 'mousemove', handler);\n    }\n\n    /**\n     * Create border elements.\n     *\n     * @param {object} settings The border settings.\n     */\n  }, {\n    key: \"createBorders\",\n    value: function createBorders(settings) {\n      var rootDocument = this.wot.rootDocument;\n      this.main = rootDocument.createElement('div');\n      var borderDivs = ['top', 'start', 'bottom', 'end', 'corner'];\n      var style = this.main.style;\n      style.position = 'absolute';\n      style.top = 0;\n      style.left = 0;\n      for (var i = 0; i < 5; i++) {\n        var position = borderDivs[i];\n        var div = rootDocument.createElement('div');\n        div.className = \"wtBorder \".concat(this.settings.className || ''); // + borderDivs[i];\n\n        if (this.settings[position] && this.settings[position].hide) {\n          div.className += ' hidden';\n        }\n        style = div.style;\n        style.backgroundColor = this.settings[position] && this.settings[position].color ? this.settings[position].color : settings.border.color;\n        style.height = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        style.width = this.settings[position] && this.settings[position].width ? \"\".concat(this.settings[position].width, \"px\") : \"\".concat(settings.border.width, \"px\");\n        this.main.appendChild(div);\n      }\n      this.top = this.main.childNodes[0];\n      this.start = this.main.childNodes[1];\n      this.bottom = this.main.childNodes[2];\n      this.end = this.main.childNodes[3];\n      this.topStyle = this.top.style;\n      this.startStyle = this.start.style;\n      this.bottomStyle = this.bottom.style;\n      this.endStyle = this.end.style;\n      this.corner = this.main.childNodes[4];\n      this.corner.className += ' corner';\n      this.cornerStyle = this.corner.style;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n      this.cornerStyle.height = this.cornerDefaultStyle.height;\n      this.cornerStyle.border = [this.cornerDefaultStyle.borderWidth, this.cornerDefaultStyle.borderStyle, this.cornerDefaultStyle.borderColor].join(' ');\n      if (isMobileBrowser()) {\n        this.createMultipleSelectorHandles();\n      }\n      this.disappear();\n      var wtTable = this.wot.wtTable;\n      var bordersHolder = wtTable.bordersHolder;\n      if (!bordersHolder) {\n        bordersHolder = rootDocument.createElement('div');\n        bordersHolder.className = 'htBorders';\n        wtTable.bordersHolder = bordersHolder;\n        wtTable.spreader.appendChild(bordersHolder);\n      }\n      bordersHolder.appendChild(this.main);\n    }\n\n    /**\n     * Create multiple selector handler for mobile devices.\n     */\n  }, {\n    key: \"createMultipleSelectorHandles\",\n    value: function createMultipleSelectorHandles() {\n      var _this3 = this;\n      var rootDocument = this.wot.rootDocument;\n      this.selectionHandles = {\n        top: rootDocument.createElement('DIV'),\n        topHitArea: rootDocument.createElement('DIV'),\n        bottom: rootDocument.createElement('DIV'),\n        bottomHitArea: rootDocument.createElement('DIV')\n      };\n      var width = 10;\n      var hitAreaWidth = 40;\n      this.selectionHandles.top.className = 'topSelectionHandle topLeftSelectionHandle';\n      this.selectionHandles.topHitArea.className = 'topSelectionHandle-HitArea topLeftSelectionHandle-HitArea';\n      this.selectionHandles.bottom.className = 'bottomSelectionHandle bottomRightSelectionHandle';\n      this.selectionHandles.bottomHitArea.className = 'bottomSelectionHandle-HitArea bottomRightSelectionHandle-HitArea';\n      this.selectionHandles.styles = {\n        top: this.selectionHandles.top.style,\n        topHitArea: this.selectionHandles.topHitArea.style,\n        bottom: this.selectionHandles.bottom.style,\n        bottomHitArea: this.selectionHandles.bottomHitArea.style\n      };\n      var hitAreaStyle = {\n        position: 'absolute',\n        height: \"\".concat(hitAreaWidth, \"px\"),\n        width: \"\".concat(hitAreaWidth, \"px\"),\n        'border-radius': \"\".concat(parseInt(hitAreaWidth / 1.5, 10), \"px\")\n      };\n      objectEach(hitAreaStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottomHitArea[key] = value;\n        _this3.selectionHandles.styles.topHitArea[key] = value;\n      });\n      var handleStyle = {\n        position: 'absolute',\n        height: \"\".concat(width, \"px\"),\n        width: \"\".concat(width, \"px\"),\n        'border-radius': \"\".concat(parseInt(width / 1.5, 10), \"px\"),\n        background: '#F5F5FF',\n        border: '1px solid #4285c8'\n      };\n      objectEach(handleStyle, function (value, key) {\n        _this3.selectionHandles.styles.bottom[key] = value;\n        _this3.selectionHandles.styles.top[key] = value;\n      });\n      this.main.appendChild(this.selectionHandles.top);\n      this.main.appendChild(this.selectionHandles.bottom);\n      this.main.appendChild(this.selectionHandles.topHitArea);\n      this.main.appendChild(this.selectionHandles.bottomHitArea);\n    }\n\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isPartRange\",\n    value: function isPartRange(row, col) {\n      var areaSelection = this.wot.selections.createOrGetArea();\n      if (areaSelection.cellRange) {\n        if (row !== areaSelection.cellRange.to.row || col !== areaSelection.cellRange.to.col) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    /**\n     * @param {number} row The visual row index.\n     * @param {number} col The visual column index.\n     * @param {number} top The top position of the handler.\n     * @param {number} left The left position of the handler.\n     * @param {number} width The width of the handler.\n     * @param {number} height The height of the handler.\n     */\n  }, {\n    key: \"updateMultipleSelectionHandlesPosition\",\n    value: function updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      var _this$selectionHandle = this.selectionHandles.styles,\n        topStyles = _this$selectionHandle.top,\n        topHitAreaStyles = _this$selectionHandle.topHitArea,\n        bottomStyles = _this$selectionHandle.bottom,\n        bottomHitAreaStyles = _this$selectionHandle.bottomHitArea;\n      var handleBorderSize = parseInt(topStyles.borderWidth, 10);\n      var handleSize = parseInt(topStyles.width, 10);\n      var hitAreaSize = parseInt(topHitAreaStyles.width, 10);\n      var totalTableWidth = this.wot.wtTable.getWidth();\n      var totalTableHeight = this.wot.wtTable.getHeight();\n      topStyles.top = \"\".concat(parseInt(top - handleSize - 1, 10), \"px\");\n      topStyles[inlinePosProperty] = \"\".concat(parseInt(left - handleSize - 1, 10), \"px\");\n      topHitAreaStyles.top = \"\".concat(parseInt(top - hitAreaSize / 4 * 3, 10), \"px\");\n      topHitAreaStyles[inlinePosProperty] = \"\".concat(parseInt(left - hitAreaSize / 4 * 3, 10), \"px\");\n      var bottomHandlerInline = Math.min(parseInt(left + width, 10), totalTableWidth - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaInline = Math.min(parseInt(left + width - hitAreaSize / 4, 10), totalTableWidth - hitAreaSize - handleBorderSize * 2);\n      bottomStyles[inlinePosProperty] = \"\".concat(bottomHandlerInline, \"px\");\n      bottomHitAreaStyles[inlinePosProperty] = \"\".concat(bottomHandlerAreaInline, \"px\");\n      var bottomHandlerTop = Math.min(parseInt(top + height, 10), totalTableHeight - handleSize - handleBorderSize * 2);\n      var bottomHandlerAreaTop = Math.min(parseInt(top + height - hitAreaSize / 4, 10), totalTableHeight - hitAreaSize - handleBorderSize * 2);\n      bottomStyles.top = \"\".concat(bottomHandlerTop, \"px\");\n      bottomHitAreaStyles.top = \"\".concat(bottomHandlerAreaTop, \"px\");\n      if (this.settings.border.cornerVisible && this.settings.border.cornerVisible()) {\n        topStyles.display = 'block';\n        topHitAreaStyles.display = 'block';\n        if (this.isPartRange(row, col)) {\n          bottomStyles.display = 'none';\n          bottomHitAreaStyles.display = 'none';\n        } else {\n          bottomStyles.display = 'block';\n          bottomHitAreaStyles.display = 'block';\n        }\n      } else {\n        topStyles.display = 'none';\n        bottomStyles.display = 'none';\n        topHitAreaStyles.display = 'none';\n        bottomHitAreaStyles.display = 'none';\n      }\n      if (row === this.wot.wtSettings.getSetting('fixedRowsTop') || col === this.wot.wtSettings.getSetting('fixedColumnsStart')) {\n        topStyles.zIndex = '9999';\n        topHitAreaStyles.zIndex = '9999';\n      } else {\n        topStyles.zIndex = '';\n        topHitAreaStyles.zIndex = '';\n      }\n    }\n\n    /**\n     * Show border around one or many cells.\n     *\n     * @param {Array} corners The corner coordinates.\n     */\n  }, {\n    key: \"appear\",\n    value: function appear(corners) {\n      if (this.disabled) {\n        return;\n      }\n      var _this$wot = this.wot,\n        wtTable = _this$wot.wtTable,\n        rootDocument = _this$wot.rootDocument,\n        rootWindow = _this$wot.rootWindow; // todo refactoring: consider about using internal facade (it is given by external code)\n      var fromRow;\n      var toRow;\n      var fromColumn;\n      var toColumn;\n      var rowHeader;\n      var columnHeader;\n      var rowsCount = wtTable.getRenderedRowsCount();\n      for (var i = 0; i < rowsCount; i += 1) {\n        var s = wtTable.rowFilter.renderedToSource(i);\n        if (s >= corners[0] && s <= corners[2]) {\n          fromRow = s;\n          rowHeader = corners[0];\n          break;\n        }\n      }\n      for (var _i = rowsCount - 1; _i >= 0; _i -= 1) {\n        var _s = wtTable.rowFilter.renderedToSource(_i);\n        if (_s >= corners[0] && _s <= corners[2]) {\n          toRow = _s;\n          break;\n        }\n      }\n      var columnsCount = wtTable.getRenderedColumnsCount();\n      for (var _i2 = 0; _i2 < columnsCount; _i2 += 1) {\n        var _s2 = wtTable.columnFilter.renderedToSource(_i2);\n        if (_s2 >= corners[1] && _s2 <= corners[3]) {\n          fromColumn = _s2;\n          columnHeader = corners[1];\n          break;\n        }\n      }\n      for (var _i3 = columnsCount - 1; _i3 >= 0; _i3 -= 1) {\n        var _s3 = wtTable.columnFilter.renderedToSource(_i3);\n        if (_s3 >= corners[1] && _s3 <= corners[3]) {\n          toColumn = _s3;\n          break;\n        }\n      }\n      if (fromRow === void 0 || fromColumn === void 0) {\n        this.disappear();\n        return;\n      }\n      var fromTD = wtTable.getCell(this.wot.createCellCoords(fromRow, fromColumn));\n      var isMultiple = fromRow !== toRow || fromColumn !== toColumn;\n      var toTD = isMultiple ? wtTable.getCell(this.wot.createCellCoords(toRow, toColumn)) : fromTD;\n      var fromOffset = offset(fromTD);\n      var toOffset = isMultiple ? offset(toTD) : fromOffset;\n      var containerOffset = offset(wtTable.TABLE);\n      var containerWidth = outerWidth(wtTable.TABLE);\n      var minTop = fromOffset.top;\n      var minLeft = fromOffset.left;\n      var isRtl = this.wot.wtSettings.getSetting('rtlMode');\n      var inlineStartPos = 0;\n      var width = 0;\n      if (isRtl) {\n        var fromWidth = outerWidth(fromTD);\n        var gridRightPos = rootWindow.innerWidth - containerOffset.left - containerWidth;\n        width = minLeft + fromWidth - toOffset.left;\n        inlineStartPos = rootWindow.innerWidth - minLeft - fromWidth - gridRightPos - 1;\n      } else {\n        width = toOffset.left + outerWidth(toTD) - minLeft;\n        inlineStartPos = minLeft - containerOffset.left - 1;\n      }\n      if (this.isEntireColumnSelected(fromRow, toRow)) {\n        var modifiedValues = this.getDimensionsFromHeader('columns', fromColumn, toColumn, rowHeader, containerOffset);\n        var fromTH = null;\n        if (modifiedValues) {\n          var _modifiedValues = _slicedToArray(modifiedValues, 3);\n          fromTH = _modifiedValues[0];\n          inlineStartPos = _modifiedValues[1];\n          width = _modifiedValues[2];\n        }\n        if (fromTH) {\n          fromTD = fromTH;\n        }\n      }\n      var top = minTop - containerOffset.top - 1;\n      var height = toOffset.top + outerHeight(toTD) - minTop;\n      if (this.isEntireRowSelected(fromColumn, toColumn)) {\n        var _modifiedValues2 = this.getDimensionsFromHeader('rows', fromRow, toRow, columnHeader, containerOffset);\n        var _fromTH = null;\n        if (_modifiedValues2) {\n          var _modifiedValues3 = _slicedToArray(_modifiedValues2, 3);\n          _fromTH = _modifiedValues3[0];\n          top = _modifiedValues3[1];\n          height = _modifiedValues3[2];\n        }\n        if (_fromTH) {\n          fromTD = _fromTH;\n        }\n      }\n      var style = getComputedStyle(fromTD, rootWindow);\n      if (parseInt(style.borderTopWidth, 10) > 0) {\n        top += 1;\n        height = height > 0 ? height - 1 : 0;\n      }\n      if (parseInt(style[isRtl ? 'borderRightWidth' : 'borderLeftWidth'], 10) > 0) {\n        inlineStartPos += 1;\n        width = width > 0 ? width - 1 : 0;\n      }\n      var inlinePosProperty = isRtl ? 'right' : 'left';\n      this.topStyle.top = \"\".concat(top, \"px\");\n      this.topStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.topStyle.width = \"\".concat(width, \"px\");\n      this.topStyle.display = 'block';\n      this.startStyle.top = \"\".concat(top, \"px\");\n      this.startStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.startStyle.height = \"\".concat(height, \"px\");\n      this.startStyle.display = 'block';\n      var delta = Math.floor(this.settings.border.width / 2);\n      this.bottomStyle.top = \"\".concat(top + height - delta, \"px\");\n      this.bottomStyle[inlinePosProperty] = \"\".concat(inlineStartPos, \"px\");\n      this.bottomStyle.width = \"\".concat(width, \"px\");\n      this.bottomStyle.display = 'block';\n      this.endStyle.top = \"\".concat(top, \"px\");\n      this.endStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width - delta, \"px\");\n      this.endStyle.height = \"\".concat(height + 1, \"px\");\n      this.endStyle.display = 'block';\n      var cornerVisibleSetting = this.settings.border.cornerVisible;\n      cornerVisibleSetting = typeof cornerVisibleSetting === 'function' ? cornerVisibleSetting(this.settings.layerLevel) : cornerVisibleSetting;\n      var hookResult = this.wot.getSetting('onModifyGetCellCoords', toRow, toColumn);\n      var checkRow = toRow,\n        checkCol = toColumn;\n      if (hookResult && Array.isArray(hookResult)) {\n        var _hookResult = _slicedToArray(hookResult, 4);\n        checkRow = _hookResult[2];\n        checkCol = _hookResult[3];\n      }\n      if (isMobileBrowser() || !cornerVisibleSetting || this.isPartRange(checkRow, checkCol)) {\n        this.cornerStyle.display = 'none';\n      } else {\n        this.cornerStyle.top = \"\".concat(top + height + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle[inlinePosProperty] = \"\".concat(inlineStartPos + width + this.cornerCenterPointOffset - 1, \"px\");\n        this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n        this.cornerStyle.width = this.cornerDefaultStyle.width;\n\n        // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n        this.cornerStyle.display = 'none';\n        var trimmingContainer = getTrimmingContainer(wtTable.TABLE);\n        var trimToWindow = trimmingContainer === rootWindow;\n        if (trimToWindow) {\n          trimmingContainer = rootDocument.documentElement;\n        }\n        var cornerHalfWidth = parseInt(this.cornerDefaultStyle.width, 10) / 2;\n        var cornerHalfHeight = parseInt(this.cornerDefaultStyle.height, 10) / 2;\n        if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n          var toTdOffsetLeft = trimToWindow ? toTD.getBoundingClientRect().left : toTD.offsetLeft;\n          var cornerOverlappingContainer = false;\n          var cornerEdge = 0;\n          if (isRtl) {\n            cornerEdge = toTdOffsetLeft - parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge < 0;\n          } else {\n            cornerEdge = toTdOffsetLeft + outerWidth(toTD) + parseInt(this.cornerDefaultStyle.width, 10) / 2;\n            cornerOverlappingContainer = cornerEdge >= innerWidth(trimmingContainer);\n          }\n          if (cornerOverlappingContainer) {\n            this.cornerStyle[inlinePosProperty] = \"\".concat(Math.floor(inlineStartPos + width + this.cornerCenterPointOffset - cornerHalfWidth), \"px\");\n            this.cornerStyle[isRtl ? 'borderLeftWidth' : 'borderRightWidth'] = 0;\n          }\n        }\n        if (toRow === this.wot.getSetting('totalRows') - 1) {\n          var toTdOffsetTop = trimToWindow ? toTD.getBoundingClientRect().top : toTD.offsetTop;\n          var cornerBottomEdge = toTdOffsetTop + outerHeight(toTD) + parseInt(this.cornerDefaultStyle.height, 10) / 2;\n          var _cornerOverlappingContainer = cornerBottomEdge >= innerHeight(trimmingContainer);\n          if (_cornerOverlappingContainer) {\n            this.cornerStyle.top = \"\".concat(Math.floor(top + height + this.cornerCenterPointOffset - cornerHalfHeight), \"px\");\n            this.cornerStyle.borderBottomWidth = 0;\n          }\n        }\n        this.cornerStyle.display = 'block';\n      }\n      if (isMobileBrowser()) {\n        this.updateMultipleSelectionHandlesPosition(toRow, toColumn, top, inlineStartPos, width, height);\n      }\n    }\n\n    /**\n     * Check whether an entire column of cells is selected.\n     *\n     * @private\n     * @param {number} startRowIndex Start row index.\n     * @param {number} endRowIndex End row index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isEntireColumnSelected\",\n    value: function isEntireColumnSelected(startRowIndex, endRowIndex) {\n      return startRowIndex === this.wot.wtTable.getFirstRenderedRow() && endRowIndex === this.wot.wtTable.getLastRenderedRow();\n    }\n\n    /**\n     * Check whether an entire row of cells is selected.\n     *\n     * @private\n     * @param {number} startColumnIndex Start column index.\n     * @param {number} endColumnIndex End column index.\n     * @returns {boolean}\n     */\n  }, {\n    key: \"isEntireRowSelected\",\n    value: function isEntireRowSelected(startColumnIndex, endColumnIndex) {\n      return startColumnIndex === this.wot.wtTable.getFirstRenderedColumn() && endColumnIndex === this.wot.wtTable.getLastRenderedColumn();\n    }\n\n    /**\n     * Get left/top index and width/height depending on the `direction` provided.\n     *\n     * @private\n     * @param {string} direction `rows` or `columns`, defines if an entire column or row is selected.\n     * @param {number} fromIndex Start index of the selection.\n     * @param {number} toIndex End index of the selection.\n     * @param {number} headerIndex The header index as negative value.\n     * @param {number} containerOffset Offset of the container.\n     * @returns {Array|boolean} Returns an array of [headerElement, left, width] or [headerElement, top, height], depending on `direction` (`false` in case of an error getting the headers).\n     */\n  }, {\n    key: \"getDimensionsFromHeader\",\n    value: function getDimensionsFromHeader(direction, fromIndex, toIndex, headerIndex, containerOffset) {\n      var wtTable = this.wot.wtTable;\n      var rootHotElement = wtTable.wtRootElement.parentNode;\n      var getHeaderFn = null;\n      var dimensionFn = null;\n      var entireSelectionClassname = null;\n      var index = null;\n      var dimension = null;\n      var dimensionProperty = null;\n      var startHeader = null;\n      var endHeader = null;\n      switch (direction) {\n        case 'rows':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getRowHeader.apply(wtTable, arguments);\n          };\n          dimensionFn = function dimensionFn() {\n            return outerHeight.apply(void 0, arguments);\n          };\n          entireSelectionClassname = 'ht__selection--rows';\n          dimensionProperty = 'top';\n          break;\n        case 'columns':\n          getHeaderFn = function getHeaderFn() {\n            return wtTable.getColumnHeader.apply(wtTable, arguments);\n          };\n          dimensionFn = function dimensionFn() {\n            return outerWidth.apply(void 0, arguments);\n          };\n          entireSelectionClassname = 'ht__selection--columns';\n          dimensionProperty = 'left';\n          break;\n        default:\n      }\n      if (rootHotElement.classList.contains(entireSelectionClassname)) {\n        var columnHeaderLevelCount = this.wot.getSetting('columnHeaders').length;\n        startHeader = getHeaderFn(fromIndex, columnHeaderLevelCount - headerIndex);\n        endHeader = getHeaderFn(toIndex, columnHeaderLevelCount - headerIndex);\n        if (!startHeader || !endHeader) {\n          return false;\n        }\n        var startHeaderOffset = offset(startHeader);\n        var endOffset = offset(endHeader);\n        if (startHeader && endHeader) {\n          index = startHeaderOffset[dimensionProperty] - containerOffset[dimensionProperty] - 1;\n          dimension = endOffset[dimensionProperty] + dimensionFn(endHeader) - startHeaderOffset[dimensionProperty];\n        }\n        return [startHeader, index, dimension];\n      }\n      return false;\n    }\n\n    /**\n     * Change border style.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {object} border The border object descriptor.\n     */\n  }, {\n    key: \"changeBorderStyle\",\n    value: function changeBorderStyle(borderElement, border) {\n      var style = this[borderElement].style;\n      var borderStyle = border[borderElement];\n      if (!borderStyle || borderStyle.hide) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        if (hasClass(this[borderElement], 'hidden')) {\n          removeClass(this[borderElement], 'hidden');\n        }\n        style.backgroundColor = borderStyle.color;\n        if (borderElement === 'top' || borderElement === 'bottom') {\n          style.height = \"\".concat(borderStyle.width, \"px\");\n        }\n        if (borderElement === 'start' || borderElement === 'end') {\n          style.width = \"\".concat(borderStyle.width, \"px\");\n        }\n      }\n    }\n\n    /**\n     * Change border style to default.\n     *\n     * @private\n     * @param {string} position The position type (\"top\", \"bottom\", \"start\", \"end\") to change.\n     */\n  }, {\n    key: \"changeBorderToDefaultStyle\",\n    value: function changeBorderToDefaultStyle(position) {\n      var defaultBorder = {\n        width: 1,\n        color: '#000'\n      };\n      var style = this[position].style;\n      style.backgroundColor = defaultBorder.color;\n      style.width = \"\".concat(defaultBorder.width, \"px\");\n      style.height = \"\".concat(defaultBorder.width, \"px\");\n    }\n\n    /**\n     * Toggle class 'hidden' to element.\n     *\n     * @private\n     * @param {string} borderElement Coordinate where add/remove border: top, bottom, start, end.\n     * @param {boolean} [remove] Defines type of the action to perform.\n     */\n  }, {\n    key: \"toggleHiddenClass\",\n    value: function toggleHiddenClass(borderElement, remove) {\n      this.changeBorderToDefaultStyle(borderElement);\n      if (remove) {\n        addClass(this[borderElement], 'hidden');\n      } else {\n        removeClass(this[borderElement], 'hidden');\n      }\n    }\n\n    /**\n     * Hide border.\n     */\n  }, {\n    key: \"disappear\",\n    value: function disappear() {\n      this.topStyle.display = 'none';\n      this.bottomStyle.display = 'none';\n      this.startStyle.display = 'none';\n      this.endStyle.display = 'none';\n      this.cornerStyle.display = 'none';\n      if (isMobileBrowser()) {\n        this.selectionHandles.styles.top.display = 'none';\n        this.selectionHandles.styles.topHitArea.display = 'none';\n        this.selectionHandles.styles.bottom.display = 'none';\n        this.selectionHandles.styles.bottomHitArea.display = 'none';\n      }\n    }\n\n    /**\n     * Cleans up all the DOM state related to a Border instance. Call this prior to deleting a Border instance.\n     */\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.eventManager.destroyWithOwnEventsOnly();\n      this.main.parentNode.removeChild(this.main);\n    }\n  }]);\n  return Border;\n}();\nexport default Border;"],"mappings":"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"},"metadata":{},"sourceType":"module"}