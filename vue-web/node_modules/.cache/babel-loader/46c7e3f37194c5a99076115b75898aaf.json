{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport Layout from \"@/layout/HomeNav.vue\";\nimport HomeLayout from \"@/layout/HomeLayout\";\nimport UserLayout from \"@/layout/UserLayout\";\nimport { message } from \"ant-design-vue\";\nconst routes = [{\n  path: '/',\n  component: HomeLayout,\n  redirect: '/home',\n  children: [{\n    path: '/home',\n    component: () => import('@/views/home/HomePage.vue'),\n    name: 'home',\n    meta: {\n      title: '主页'\n    }\n  }, {\n    path: '/intro',\n    component: () => import('@/views/home/IntroPage.vue'),\n    name: 'intro',\n    meta: {\n      title: '介绍'\n    }\n  }, {\n    path: '/about',\n    component: () => import('@/views/home/AboutPage.vue'),\n    name: 'about',\n    meta: {\n      title: '关于'\n    }\n  }, {\n    path: '/support',\n    component: () => import('@/views/home/supportPage.vue'),\n    name: 'support',\n    meta: {\n      title: '支持'\n    }\n  }]\n}, {\n  path: '/login',\n  component: UserLayout,\n  redirect: '/login',\n  children: [{\n    path: '/login',\n    component: () => import('@/views/user/LoginUser.vue'),\n    name: '/login',\n    meta: {\n      title: '登录'\n    }\n  }, {\n    path: '/register',\n    component: () => import('@/views/user/RegisterUser.vue'),\n    name: '/register',\n    meta: {\n      title: '登录'\n    }\n  }]\n}, {\n  path: '/init-voting',\n  component: Layout,\n  name: 'init-voting',\n  meta: {\n    title: '发起投票'\n  },\n  children: [{\n    path: '/avec',\n    component: () => import('@/views/InitVote/avec/initAvec/AVEC.vue'),\n    name: 'avec',\n    meta: {\n      title: '匿名灵活投票',\n      requiredLogin: true\n    }\n  }, {\n    path: '/freshavec',\n    component: () => import('@/views/InitVote/avec/ReAVEC.vue'),\n    name: 'freshavec',\n    meta: {\n      title: '更新投票'\n    }\n  }, {\n    path: '/we',\n    component: () => import('@/views/InitVote/we/initWe/WE.vue'),\n    name: 'we',\n    meta: {\n      title: '匿名权重投票',\n      requiredLogin: true\n    }\n  }, {\n    path: '/freshwe',\n    component: () => import('@/views/InitVote/we/ReWE.vue'),\n    name: 'freshwe',\n    meta: {\n      title: '更新投票'\n    }\n  }]\n}, {\n  path: '/voting',\n  component: Layout,\n  redirect: '/voting',\n  children: [{\n    path: '/voting',\n    component: () => import('@/views/voting/AddVoting.vue'),\n    name: 'voting',\n    meta: {\n      title: '投票',\n      requiredLogin: true\n    }\n  }]\n}, {\n  path: '/overview',\n  component: Layout,\n  redirect: '/overview',\n  children: [{\n    path: '/overview',\n    component: () => import('@/views/overview/OverView.vue'),\n    name: 'overview',\n    meta: {\n      title: '概览',\n      requiredLogin: true\n    }\n  }]\n}, {\n  path: '/info',\n  component: Layout,\n  redirect: '/info',\n  children: [{\n    path: '/result',\n    component: () => import('@/views/info/GetResult.vue'),\n    name: 'result',\n    meta: {\n      title: '投票结果',\n      requiredLogin: true\n    }\n  }, {\n    path: '/voting-info',\n    component: () => import('@/views/info/GetInfo.vue'),\n    name: 'voting-info',\n    meta: {\n      title: '投票信息',\n      requiredLogin: true\n    }\n  }]\n}, {\n  path: '/404',\n  name: 'NotFoundPage',\n  component: () => import('@/views/PageNot.vue')\n}, {\n  // will match everything\n  path: '/:catchAll(.*)',\n  redirect: '/404'\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const requiredLogin = to.meta.requiredLogin; // console.log(requiredLogin)\n\n  let token = sessionStorage.getItem(\"token\");\n\n  if (requiredLogin) {\n    if (token) {\n      next();\n    } else {\n      message.warning(\"请完成登录！\");\n      next('/login');\n    }\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Layout","HomeLayout","UserLayout","message","routes","path","component","redirect","children","name","meta","title","requiredLogin","router","history","beforeEach","to","from","next","token","sessionStorage","getItem","warning"],"sources":["/home/ubuntu/voting/vue-web/src/router/index.js"],"sourcesContent":["import { createRouter,createWebHistory} from \"vue-router\";\r\nimport Layout from \"@/layout/HomeNav.vue\";\r\nimport HomeLayout from \"@/layout/HomeLayout\";\r\nimport UserLayout from \"@/layout/UserLayout\";\r\nimport { message } from \"ant-design-vue\";\r\n\r\nconst routes = [\r\n    {\r\n        path:'/',\r\n        component : HomeLayout,\r\n        redirect:'/home',\r\n        children:[\r\n            {\r\n            path:'/home',\r\n            component:() => import('@/views/home/HomePage.vue'),\r\n            name:'home',\r\n            meta:{\r\n                title:'主页'\r\n            }\r\n        },\r\n            {\r\n                path:'/intro',\r\n                component:() => import('@/views/home/IntroPage.vue'),\r\n                name:'intro',\r\n                meta:{\r\n                    title:'介绍'\r\n                }\r\n            },\r\n            {\r\n                path:'/about',\r\n                component:() => import('@/views/home/AboutPage.vue'),\r\n                name:'about',\r\n                meta:{\r\n                    title:'关于'\r\n                }\r\n            },\r\n            {\r\n                path:'/support',\r\n                component:() => import('@/views/home/supportPage.vue'),\r\n                name:'support',\r\n                meta:{\r\n                    title:'支持'\r\n                }\r\n            },\r\n        ]\r\n    },\r\n\r\n    {\r\n        path:'/login',\r\n        component : UserLayout,\r\n        redirect:'/login',\r\n        children:[{\r\n            path:'/login',\r\n            component:() => import('@/views/user/LoginUser.vue'),\r\n            name:'/login',\r\n            meta:{\r\n                title:'登录'\r\n            }\r\n        },\r\n            {\r\n                path:'/register',\r\n                component:() => import('@/views/user/RegisterUser.vue'),\r\n                name:'/register',\r\n                meta:{\r\n                    title:'登录'\r\n                }\r\n            }\r\n        ]\r\n    },\r\n\r\n    {\r\n        path: '/init-voting',\r\n        component: Layout,\r\n        name:'init-voting',\r\n        meta:{\r\n            title: '发起投票',\r\n        },\r\n        children: [\r\n            {\r\n                path: '/avec',\r\n                component:()=>import ('@/views/InitVote/avec/initAvec/AVEC.vue'),\r\n                name: 'avec',\r\n                meta: {\r\n                    title: '匿名灵活投票',\r\n                    requiredLogin: true\r\n                }\r\n            },\r\n            {\r\n                path: '/freshavec',\r\n                component:()=>import ('@/views/InitVote/avec/ReAVEC.vue'),\r\n                name: 'freshavec',\r\n                meta: {\r\n                    title: '更新投票'\r\n                }\r\n            },\r\n            {\r\n                path: '/we',\r\n                component:()=>import ('@/views/InitVote/we/initWe/WE.vue'),\r\n                name: 'we',\r\n                meta: {\r\n                    title: '匿名权重投票',\r\n                    requiredLogin: true\r\n                }\r\n            },\r\n            {\r\n                path: '/freshwe',\r\n                component:()=>import ('@/views/InitVote/we/ReWE.vue'),\r\n                name: 'freshwe',\r\n                meta: {\r\n                    title: '更新投票'\r\n                }\r\n            },\r\n        ]\r\n\r\n    },\r\n    {\r\n        path:'/voting',\r\n        component : Layout,\r\n        redirect:'/voting',\r\n        children:[{\r\n            path:'/voting',\r\n            component:() => import('@/views/voting/AddVoting.vue'),\r\n            name:'voting',\r\n            meta:{\r\n                title:'投票',\r\n                requiredLogin: true\r\n            }\r\n        }\r\n        ]\r\n    },\r\n    {\r\n        path:'/overview',\r\n        component : Layout,\r\n        redirect:'/overview',\r\n        children:[{\r\n            path:'/overview',\r\n            component:() => import('@/views/overview/OverView.vue'),\r\n            name:'overview',\r\n            meta:{\r\n                title:'概览',\r\n                requiredLogin: true\r\n            }\r\n        }\r\n        ]\r\n    },\r\n    {\r\n        path:'/info',\r\n        component : Layout,\r\n        redirect:'/info',\r\n        children:[\r\n            {\r\n            path:'/result',\r\n            component:() => import('@/views/info/GetResult.vue'),\r\n            name:'result',\r\n            meta:{\r\n                title:'投票结果',\r\n                requiredLogin: true\r\n            }\r\n        },\r\n            {\r\n                path:'/voting-info',\r\n                component:() => import('@/views/info/GetInfo.vue'),\r\n                name:'voting-info',\r\n                meta:{\r\n                    title:'投票信息',\r\n                    requiredLogin: true\r\n                }\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        path:'/404',\r\n        name:'NotFoundPage',\r\n\t\tcomponent: () => import('@/views/PageNot.vue'),\r\n    },\r\n    {\r\n\t\t// will match everything\r\n\t\tpath: '/:catchAll(.*)',\r\n        redirect: '/404',\r\n\t},\r\n\r\n]\r\n\r\n\r\nconst router = createRouter(\r\n    {\r\n        history:createWebHistory(),\r\n        routes\r\n    }\r\n)\r\n\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n    const requiredLogin = to.meta.requiredLogin\r\n    // console.log(requiredLogin)\r\n    let token = sessionStorage.getItem(\"token\");\r\n    \r\n    if(requiredLogin){\r\n        if(token){\r\n            next();\r\n        }\r\n        else{\r\n            message.warning(\"请完成登录！\")\r\n            next('/login')\r\n        }\r\n    }\r\n    else{\r\n        next()\r\n    }\r\n  });\r\n export default router"],"mappings":"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"},"metadata":{},"sourceType":"module"}